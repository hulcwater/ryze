<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DREO AIå®¢æœæ¼”ç¤º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
            height: 200vh; /* æ¨¡æ‹Ÿé•¿é¡µé¢ç”¨äºæµ‹è¯•æ»šåŠ¨ */
        }

        /* æ¨¡æ‹ŸDREO Supporté¡µé¢å¤´éƒ¨ */
        .header {
            background: #fff;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #0066cc;
        }

        .content {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .demo-info {
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        /* AIå®¢æœæ‚¬æµ®æŒ‰é’® */
        .ai-chat-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }

        .ai-chat-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(102, 126, 234, 0.5);
        }

        .ai-chat-button.active {
            background: #ff6b6b;
        }

        .ai-chat-button .icon {
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .ai-chat-button.active .icon::before {
            content: 'âœ•';
            font-size: 24px;
        }

        .ai-chat-button:not(.active) .icon::before {
            content: 'ğŸ§';
            font-size: 18px;
        }

        .ai-chat-button:not(.active) .icon::after {
            content: 'AI';
            font-size: 9px;
            margin-top: 1px;
            font-weight: bold;
            line-height: 1;
        }

        /* å¯¹è¯æ¡† */
        .chat-widget {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 560px;
            height: 800px;
            background: #fff;
            border-radius: 15px;
            box-shadow: 0 10px 50px rgba(0,0,0,0.2);
            z-index: 999;
            display: none;
            flex-direction: column;
            overflow: hidden;
            animation: slideUp 0.3s ease;
        }

        .chat-widget.show {
            display: flex;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* å¯¹è¯æ¡†å¤´éƒ¨ */
        .chat-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .chat-title {
            font-size: 18px;
            font-weight: bold;
        }

        .more-menu {
            position: relative;
        }

        .more-button {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: background 0.3s ease;
        }

        .more-button:hover {
            background: rgba(255,255,255,0.1);
        }

        .more-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            min-width: 120px;
            display: none;
            z-index: 1001;
        }

        .more-dropdown.show {
            display: block;
        }

        .more-option {
            padding: 12px 16px;
            cursor: pointer;
            color: #333;
            font-size: 14px;
            transition: background 0.2s ease;
        }

        .more-option:hover {
            background: #f8f9fa;
        }

        /* å¯¹è¯åŒºåŸŸ */
        .chat-body {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8f9fa;
        }

        .welcome-message {
            background: white;
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .ai-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-bottom: 12px;
        }

        .question-categories {
            margin-top: 20px;
        }

        .category-title {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 12px;
        }

        .category-item {
            background: white;
            border: 1px solid #e0e6ed;
            border-radius: 8px;
            padding: 12px 16px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .category-item:hover {
            background: #f0f4ff;
            border-color: #667eea;
        }

        .category-arrow {
            transition: transform 0.2s ease;
            color: #999;
        }

        .category-item.expanded .category-arrow {
            transform: rotate(90deg);
        }

        .subcategories {
            margin-top: 8px;
            margin-left: 16px;
            display: none;
        }

        .subcategories.show {
            display: block;
        }

        .subcategory-item {
            background: #f8f9fa;
            border: none;
            padding: 10px 12px;
            margin-bottom: 4px;
            font-size: 14px;
            color: #666;
        }

        .subcategory-item:hover {
            background: #e9ecef;
            color: #333;
        }

        /* æ¶ˆæ¯æ ·å¼ */
        .message {
            margin-bottom: 16px;
            display: flex;
            align-items: flex-start;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-content {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 12px;
            word-wrap: break-word;
        }

        .message.ai .message-content {
            background: white;
            border: 1px solid #e0e6ed;
            margin-left: 8px;
        }

        .message.user .message-content {
            background: #667eea;
            color: white;
            margin-right: 8px;
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        .message.ai .message-avatar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .message.user .message-avatar {
            background: #333;
            color: white;
        }

        /* å¯ç‚¹å‡»çš„ç¤ºä¾‹é—®é¢˜æ ·å¼ */
        .example-question {
            color: #667eea;
            cursor: pointer;
            text-decoration: underline;
            transition: color 0.2s ease;
            display: inline-block;
            margin: 2px 0;
        }

        .example-question:hover {
            color: #5a6fd8;
            background: rgba(102, 126, 234, 0.1);
            padding: 2px 4px;
            border-radius: 4px;
        }

        /* äº§å“å¯¹æ¯”è¡¨æ ¼æ ·å¼ */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .comparison-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 8px;
            font-weight: bold;
            text-align: center;
            font-size: 13px;
        }

        .comparison-table td {
            padding: 10px 8px;
            border-bottom: 1px solid #e0e6ed;
            text-align: center;
            font-size: 12px;
        }

        .comparison-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .comparison-table tr:hover {
            background: #f0f4ff;
        }

        .comparison-table .feature-name {
            background: #f8f9fa !important;
            font-weight: bold;
            text-align: left;
            color: #333;
        }

        .pros-cons-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 12px;
            margin: 12px 0;
        }

        .pros-cons-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .pros-item {
            color: #28a745;
            margin: 4px 0;
            font-size: 12px;
        }

        .cons-item {
            color: #dc3545;
            margin: 4px 0;
            font-size: 12px;
        }

        /* äº§å“æ¨èå¡ç‰‡æ ·å¼ */
        .product-card {
            background: white;
            border: 2px solid #e0e6ed;
            border-radius: 12px;
            padding: 16px;
            margin: 12px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            position: relative;
            overflow: hidden;
        }

        .product-card:hover {
            border-color: #667eea;
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.15);
            transform: translateY(-2px);
        }

        .product-card:hover .card-overlay {
            opacity: 1;
        }

        .card-overlay {
            position: absolute;
            top: 0;
            right: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 12px;
            border-radius: 0 12px 0 12px;
            font-size: 12px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .product-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: bold;
            display: inline-block;
            margin: 4px 4px 0 0;
        }


        /* è¾“å…¥åŒºåŸŸ */
        .chat-input {
            padding: 16px;
            border-top: 1px solid #e0e6ed;
            background: white;
        }

        .input-container {
            display: flex;
            align-items: center;
            background: #f8f9fa;
            border-radius: 25px;
            padding: 8px 16px;
        }

        .input-field {
            flex: 1;
            border: none;
            background: none;
            outline: none;
            padding: 8px 0;
            font-size: 14px;
        }

        .send-button {
            background: #667eea;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .send-button:hover {
            background: #5a6fd8;
        }

        .send-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        /* ç‚¹èµ/è¸©æŒ‰é’®æ ·å¼ */
        .feedback-buttons {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 12px;
            padding-top: 8px;
            border-top: 1px solid #f0f0f0;
            justify-content: flex-end;
        }

        .feedback-button {
            background: none;
            border: 1px solid #e0e6ed;
            border-radius: 6px;
            padding: 6px 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 4px;
            color: #666;
            min-width: 60px;
            justify-content: center;
        }

        .feedback-button:hover {
            background: #f8f9fa;
            border-color: #667eea;
            color: #667eea;
        }

        .feedback-button.liked {
            background: #e8f5e8;
            border-color: #28a745;
            color: #28a745;
        }

        .feedback-button.disliked {
            background: #ffe6e6;
            border-color: #dc3545;
            color: #dc3545;
        }

        .feedback-button.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .feedback-button.disabled:hover {
            background: none;
            border-color: #e0e6ed;
            color: #666;
        }

        .feedback-text {
            font-size: 11px;
            color: #999;
            margin-right: 8px;
        }

        .feedback-success {
            background: #e8f5e8;
            color: #28a745;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: bold;
            margin-left: 8px;
            display: none;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 480px) {
            .chat-widget {
                width: calc(100vw - 20px);
                right: 10px;
                bottom: 90px;
                height: calc(100vh - 120px);
            }
            
            .ai-chat-button {
                right: 20px;
                bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- æ¨¡æ‹ŸDREO Supporté¡µé¢å†…å®¹ -->
    <div class="header">
        <div class="logo">DREO Support</div>
    </div>

    <div class="content">
        <div class="demo-info">
            <h1>AIå®¢æœæ¼”ç¤ºé¡µé¢</h1>
            <p>è¿™æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿçš„DREO Supporté¡µé¢ï¼Œå³ä¸‹è§’æœ‰AIå®¢æœåŠŸèƒ½ã€‚æ‚¨å¯ä»¥ï¼š</p>
            <ul style="margin-left: 20px; margin-top: 10px;">
                <li>ç‚¹å‡»å³ä¸‹è§’çš„AIå®¢æœæŒ‰é’®å¼€å§‹å¯¹è¯</li>
                <li>é€‰æ‹©é¢„è®¾çš„é—®é¢˜ç±»å‹æˆ–ç›´æ¥è¾“å…¥é—®é¢˜</li>
                <li>ä½¿ç”¨å³ä¸Šè§’çš„"æ›´å¤š"èœå•é‡æ–°å¼€å§‹å¯¹è¯</li>
                <li>æ»šåŠ¨é¡µé¢æµ‹è¯•æŒ‰é’®çš„å›ºå®šä½ç½®æ•ˆæœ</li>
            </ul>
        </div>

        <div style="height: 1000px; background: linear-gradient(45deg, #f0f2f5, #ffffff); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #999;">
            <h2>æ»šåŠ¨é¡µé¢æµ‹è¯•AIå®¢æœæŒ‰é’®å›ºå®šä½ç½®æ•ˆæœ</h2>
        </div>
    </div>

    <!-- AIå®¢æœæ‚¬æµ®æŒ‰é’® -->
    <button class="ai-chat-button" id="chatButton">
        <span class="icon"></span>
    </button>

    <!-- AIå®¢æœå¯¹è¯æ¡† -->
    <div class="chat-widget" id="chatWidget">
        <div class="chat-header">
            <div class="chat-title">DREO Customer Service</div>
            <div class="more-menu">
                <button class="more-button" id="moreButton">â‹¯</button>
                <div class="more-dropdown" id="moreDropdown">
                    <div class="more-option" id="resetChat">é‡æ–°å¯¹è¯</div>
                </div>
            </div>
        </div>

        <div class="chat-body" id="chatBody">
            <div class="welcome-message">
                <div class="ai-avatar">AI</div>
                <div>
                    <strong>æ‚¨å¥½ï¼æ¬¢è¿ä½¿ç”¨DREOæ™ºèƒ½å®¢æœåŠ©æ‰‹ï¼</strong><br>
                    æˆ‘å¯ä»¥å¸®åŠ©æ‚¨è§£å†³äº§å“å’¨è¯¢å’Œå”®åæ”¯æŒé—®é¢˜ã€‚æ‚¨å¯ä»¥ï¼š
                    <ul style="margin: 8px 0 0 16px;">
                        <li>é€‰æ‹©ä¸‹æ–¹çš„å¸¸è§é—®é¢˜ç±»å‹</li>
                        <li>ç›´æ¥åœ¨è¾“å…¥æ¡†ä¸­æè¿°æ‚¨çš„é—®é¢˜</li>
                    </ul>
                </div>
            </div>

            <div class="question-categories">
                <div class="category-title">å¸¸è§é—®é¢˜åˆ†ç±»</div>
                
                <div class="category-item" data-category="äº§å“å’¨è¯¢">
                    <span>ğŸ›ï¸ äº§å“å’¨è¯¢</span>
                    <span class="category-arrow">â–¶</span>
                </div>
                <div class="subcategories">
                    <div class="subcategory-item" data-question="äº§å“ä¿¡æ¯ä¸åŠŸèƒ½å’¨è¯¢">
                        ğŸ“‹ äº§å“ä¿¡æ¯ä¸åŠŸèƒ½å’¨è¯¢
                    </div>
                    <div class="subcategory-item" data-question="è´­ä¹°å†³ç­–">
                        ğŸ¤” è´­ä¹°å†³ç­–
                    </div>
                </div>

                <div class="category-item" data-category="å”®åæ”¯æŒ">
                    <span>ğŸ”§ å”®åæ”¯æŒ</span>
                    <span class="category-arrow">â–¶</span>
                </div>
                <div class="subcategories">
                    <div class="subcategory-item" data-question="äº§å“æ•…éšœè¯Šæ–­">
                        ğŸ” äº§å“æ•…éšœè¯Šæ–­
                    </div>
                    <div class="subcategory-item" data-question="è½¯ä»¶é—®é¢˜">
                        ğŸ’» è½¯ä»¶é—®é¢˜
                    </div>
                    <div class="subcategory-item" data-question="äº§å“ç»´æŠ¤">
                        ğŸ§½ äº§å“ç»´æŠ¤
                    </div>
                </div>
            </div>
        </div>

        <div class="chat-input">
            <div class="input-container">
                <input type="text" class="input-field" id="messageInput" placeholder="è¯·è¾“å…¥æ‚¨çš„é—®é¢˜...">
                <button class="send-button" id="sendButton">
                    <span>â¤</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // é—®é¢˜ç±»å‹æ•°æ®
        const questionData = {
            "äº§å“ä¿¡æ¯ä¸åŠŸèƒ½å’¨è¯¢": {
                description: "æŸ¥è¯¢äº§å“å‚æ•°ã€æ ¸å¿ƒåŠŸèƒ½ã€æ™ºèƒ½ç‰¹æ€§å’Œå…¼å®¹æ€§ä¿¡æ¯ç­‰",
                examples: [
                    "Nomad Oneå¡”æ‰‡å°ºå¯¸/é‡é‡/è€—ç”µé‡æ˜¯å¤šå°‘?",
                    "DR-HHM003SåŠ æ¹¿å™¨åŠ æ¹¿æ•ˆæœå¦‚ä½•ï¼Ÿ",
                    "DREOçš„æ™ºèƒ½äº§å“æ”¯æŒå“ªäº›è¯­éŸ³åŠ©æ‰‹?",
                    "Nomad Oneå¡”æ‰‡äº§å“çš„å™ªéŸ³æ°´å¹³å¦‚ä½•?"
                ]
            },
            "è´­ä¹°å†³ç­–": {
                description: "äº§å“æ¨èã€å‹å·å¯¹æ¯”ã€å®‰è£…è¦æ±‚å’¨è¯¢ç­‰",
                examples: [
                    "DR-HHM002Så’ŒDR-HHM003SåŠ æ¹¿å™¨çš„ä¸»è¦åŒºåˆ«?",
                    "DR-HHM002Så’ŒDR-HHM003Så“ªæ¬¾åŠ æ¹¿å™¨é€‚åˆå©´å„¿æˆ¿é—´?"
                ]
            },
            "äº§å“æ•…éšœè¯Šæ–­": {
                description: "è§£å†³å¼€æœºã€ç½‘ç»œè¿æ¥ã€ç‰©ç†æ•…éšœå’Œä¼ æ„Ÿå™¨å¼‚å¸¸ç­‰é—®é¢˜",
                examples: [
                    "æš–é£æœºæ’ç”µæ— ååº”æ€ä¹ˆåŠ?",
                    "äº§å“é…ç½‘å¤±è´¥å¦‚ä½•è§£å†³?",
                    "å¡”æ‰‡æœ‰å¼‚å“æ˜¯ä»€ä¹ˆåŸå› ?",
                    "Wi-Fié¢‘ç¹æ‰çº¿æ€ä¹ˆå¤„ç†?"
                ]
            },
            "è½¯ä»¶é—®é¢˜": {
                description: "è§£å†³Appé—®é¢˜ã€è®¾å¤‡è¿æ¥å’ŒåŠŸèƒ½å¼‚å¸¸ç­‰",
                examples: [
                    "è®¾å¤‡æ˜¾ç¤ºç¦»çº¿å¦‚ä½•å¤„ç†?",
                    "è¯­éŸ³æ§åˆ¶æ— å“åº”ï¼Ÿ",
                    "çŠ¶æ€ä¸åŒæ­¥é—®é¢˜ï¼Ÿ"
                ]
            },
            "äº§å“ç»´æŠ¤": {
                description: "äº§å“æ¸…æ´ä¿å…»ã€é…ä»¶æ›´æ¢ã€å®šæœŸç»´æŠ¤å’Œä½¿ç”¨å¯¿å‘½ä¼˜åŒ–ç­‰",
                examples: [
                    "åŠ æ¹¿å™¨å¤šä¹…éœ€è¦æ¸…æ´ä¸€æ¬¡?",
                    "å¦‚ä½•æ¸…æ´é£æ‰‡å¶ç‰‡å’Œè¿‡æ»¤ç½‘?",
                    "ä»€ä¹ˆæ—¶å€™éœ€è¦æ›´æ¢é…ä»¶?",
                    "å¦‚ä½•å»¶é•¿äº§å“ä½¿ç”¨å¯¿å‘½?"
                ]
            }
        };

        // DOMå…ƒç´ 
        const chatButton = document.getElementById('chatButton');
        const chatWidget = document.getElementById('chatWidget');
        const chatBody = document.getElementById('chatBody');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');
        const moreButton = document.getElementById('moreButton');
        const moreDropdown = document.getElementById('moreDropdown');
        const resetChat = document.getElementById('resetChat');


        // åˆ‡æ¢å¯¹è¯æ¡†æ˜¾ç¤º/éšè—
        chatButton.addEventListener('click', () => {
            const isActive = chatButton.classList.contains('active');
            if (isActive) {
                chatWidget.classList.remove('show');
                chatButton.classList.remove('active');
                moreDropdown.classList.remove('show');
            } else {
                chatWidget.classList.add('show');
                chatButton.classList.add('active');
            }
        });

        // æ›´å¤šèœå•åˆ‡æ¢
        moreButton.addEventListener('click', (e) => {
            e.stopPropagation();
            moreDropdown.classList.toggle('show');
        });

        // ç‚¹å‡»å…¶ä»–åœ°æ–¹å…³é—­æ›´å¤šèœå•
        document.addEventListener('click', () => {
            moreDropdown.classList.remove('show');
        });

        // é‡æ–°å¯¹è¯
        resetChat.addEventListener('click', () => {
            resetChatContent();
            moreDropdown.classList.remove('show');
        });

        // é‡ç½®èŠå¤©å†…å®¹
        function resetChatContent() {
            // é‡æ–°ç”Ÿæˆåˆå§‹çš„èŠå¤©å†…å®¹
            chatBody.innerHTML = `
                <div class="welcome-message">
                    <div class="ai-avatar">AI</div>
                    <div>
                        <strong>æ‚¨å¥½ï¼æ¬¢è¿ä½¿ç”¨DREOæ™ºèƒ½å®¢æœåŠ©æ‰‹ï¼</strong><br>
                        æˆ‘å¯ä»¥å¸®åŠ©æ‚¨è§£å†³äº§å“å’¨è¯¢å’Œå”®åæ”¯æŒé—®é¢˜ã€‚æ‚¨å¯ä»¥ï¼š
                        <ul style="margin: 8px 0 0 16px;">
                            <li>é€‰æ‹©ä¸‹æ–¹çš„å¸¸è§é—®é¢˜ç±»å‹</li>
                            <li>ç›´æ¥åœ¨è¾“å…¥æ¡†ä¸­æè¿°æ‚¨çš„é—®é¢˜</li>
                        </ul>
                    </div>
                </div>

                <div class="question-categories">
                    <div class="category-title">å¸¸è§é—®é¢˜åˆ†ç±»</div>
                    
                    <div class="category-item" data-category="äº§å“å’¨è¯¢">
                        <span>ğŸ›ï¸ äº§å“å’¨è¯¢</span>
                        <span class="category-arrow">â–¶</span>
                    </div>
                    <div class="subcategories">
                        <div class="subcategory-item" data-question="äº§å“ä¿¡æ¯ä¸åŠŸèƒ½å’¨è¯¢">
                            ğŸ“‹ äº§å“ä¿¡æ¯ä¸åŠŸèƒ½å’¨è¯¢
                        </div>
                        <div class="subcategory-item" data-question="è´­ä¹°å†³ç­–">
                            ğŸ¤” è´­ä¹°å†³ç­–
                        </div>
                    </div>

                    <div class="category-item" data-category="å”®åæ”¯æŒ">
                        <span>ğŸ”§ å”®åæ”¯æŒ</span>
                        <span class="category-arrow">â–¶</span>
                    </div>
                    <div class="subcategories">
                        <div class="subcategory-item" data-question="äº§å“æ•…éšœè¯Šæ–­">
                            ğŸ” äº§å“æ•…éšœè¯Šæ–­
                        </div>
                        <div class="subcategory-item" data-question="è½¯ä»¶é—®é¢˜">
                            ğŸ’» è½¯ä»¶é—®é¢˜
                        </div>
                        <div class="subcategory-item" data-question="äº§å“ç»´æŠ¤">
                            ğŸ§½ äº§å“ç»´æŠ¤
                        </div>
                    </div>
                </div>
            `;

            // é‡æ–°ç»‘å®šäº‹ä»¶ç›‘å¬å™¨
            bindCategoryEvents();

            // æ¸…ç©ºè¾“å…¥æ¡†
            messageInput.value = '';
            
            // é‡ç½®å‘é€æŒ‰é’®çŠ¶æ€
            sendButton.disabled = true;

            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            chatBody.scrollTop = 0;
        }

        // ç»‘å®šåˆ†ç±»äº‹ä»¶
        function bindCategoryEvents() {
            // é‡æ–°ç»‘å®šåˆ†ç±»å±•å¼€/æ”¶èµ·äº‹ä»¶
            chatBody.querySelectorAll('.category-item').forEach(item => {
                item.addEventListener('click', () => {
                    const subcategories = item.nextElementSibling;
                    const isExpanded = item.classList.contains('expanded');
                    
                    // æ”¶èµ·æ‰€æœ‰å…¶ä»–åˆ†ç±»
                    chatBody.querySelectorAll('.category-item').forEach(otherItem => {
                        if (otherItem !== item) {
                            otherItem.classList.remove('expanded');
                            otherItem.nextElementSibling.classList.remove('show');
                        }
                    });
                    
                    // åˆ‡æ¢å½“å‰åˆ†ç±»
                    if (isExpanded) {
                        item.classList.remove('expanded');
                        subcategories.classList.remove('show');
                    } else {
                        item.classList.add('expanded');
                        subcategories.classList.add('show');
                    }
                });
            });

            // é‡æ–°ç»‘å®šå­åˆ†ç±»ç‚¹å‡»äº‹ä»¶
            chatBody.querySelectorAll('.subcategory-item').forEach(item => {
                item.addEventListener('click', () => {
                    const questionType = item.dataset.question;
                    handleQuestionSelection(questionType);
                });
            });
        }

        // åˆå§‹åŒ–æ—¶ç»‘å®šåˆ†ç±»äº‹ä»¶
        bindCategoryEvents();

        // å¤„ç†é—®é¢˜ç±»å‹é€‰æ‹©
        function handleQuestionSelection(questionType) {
            const data = questionData[questionType];
            if (data) {
                addMessage('user', `æˆ‘æƒ³äº†è§£ï¼š${questionType}`);
                
                setTimeout(() => {
                    // åˆ›å»ºå¸¦æœ‰å¯ç‚¹å‡»ç¤ºä¾‹é—®é¢˜çš„æ¶ˆæ¯
                    addMessageWithClickableExamples(questionType, data);
                }, 1000);
            }
        }

        // æ·»åŠ å¸¦æœ‰å¯ç‚¹å‡»ç¤ºä¾‹é—®é¢˜çš„æ¶ˆæ¯
        function addMessageWithClickableExamples(questionType, data) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'AI';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            
            // åˆ›å»ºæ–‡æœ¬å†…å®¹
            const textPart = document.createElement('div');
            textPart.style.whiteSpace = 'pre-line';
            textPart.textContent = `å…³äº${questionType}ï¼Œæˆ‘å¯ä»¥ä¸ºæ‚¨æä¾›ä»¥ä¸‹å¸®åŠ©ï¼š\n\n${data.description}\n\nå¸¸è§é—®é¢˜ï¼š`;
            messageContent.appendChild(textPart);
            
            // åˆ›å»ºå¯ç‚¹å‡»çš„ç¤ºä¾‹é—®é¢˜åˆ—è¡¨
            data.examples.forEach((example, index) => {
                const exampleDiv = document.createElement('div');
                exampleDiv.style.margin = '8px 0';
                
                const numberSpan = document.createElement('span');
                numberSpan.textContent = `${index + 1}. `;
                
                const questionSpan = document.createElement('span');
                questionSpan.className = 'example-question';
                questionSpan.textContent = example;
                questionSpan.onclick = () => {
                    addMessage('user', example);
                    setTimeout(() => {
                        addDetailedResponseWithResources(example);
                    }, 1000);
                };
                
                exampleDiv.appendChild(numberSpan);
                exampleDiv.appendChild(questionSpan);
                messageContent.appendChild(exampleDiv);
            });
            
            // æ·»åŠ ç»“å°¾æ–‡æœ¬
            const endText = document.createElement('div');
            endText.style.whiteSpace = 'pre-line';
            endText.style.marginTop = '12px';
            endText.textContent = 'è¯·å‘Šè¯‰æˆ‘æ‚¨çš„å…·ä½“é—®é¢˜ï¼Œæˆ‘ä¼šä¸ºæ‚¨è¯¦ç»†è§£ç­”ï¼';
            messageContent.appendChild(endText);
            
            // æ·»åŠ åé¦ˆæŒ‰é’®
            const messageId = `msg-${++feedbackCounter}`;
            const feedbackButtons = createFeedbackButtons(messageId);
            messageContent.appendChild(feedbackButtons);
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // å‘é€æ¶ˆæ¯
        function sendMessage() {
            const message = messageInput.value.trim();
            if (message) {
                addMessage('user', message);
                messageInput.value = '';
                
                // æ£€æµ‹æ˜¯å¦éœ€è¦è½¬äººå·¥
                if (isRequestForHumanAgent(message)) {
                    setTimeout(() => {
                        addHumanAgentResponse();
                    }, 1000);
                } else if (isDissatisfiedWithService(message)) {
                    // ç”¨æˆ·å¯¹AIæœåŠ¡è¡¨ç¤ºä¸æ»¡
                    setTimeout(() => {
                        addDissatisfiedResponse(message);
                    }, 1000);
                } else if (isOrderRelatedInquiry(message)) {
                    // è®¢å•ç›¸å…³é—®é¢˜ï¼ˆé€€/æ¢è´§ã€ç”³è¯·ä¼˜æƒ ï¼‰
                    setTimeout(() => {
                        addOrderInquiryResponse(message);
                    }, 1000);
                } else if (isProductComparison(message)) {
                    // äº§å“å¯¹æ¯”å›å¤
                    setTimeout(() => {
                        addProductComparisonResponse(message);
                    }, 1000);
                } else if (isGreeting(message)) {
                    // ç¤¼è²Œæ€§é—®å¥½
                    setTimeout(() => {
                        addGreetingResponse();
                    }, 1000);
                } else if (isOtherBrandQuestion(message)) {
                    // å…¶ä»–å“ç‰Œé—®é¢˜
                    setTimeout(() => {
                        addOtherBrandResponse(message);
                    }, 1000);
                } else if (isProductRecommendationRequest(message)) {
                    // äº§å“æ¨èè¯·æ±‚
                    setTimeout(() => {
                        addProductRecommendationResponse(message);
                    }, 1000);
                } else if (isImprovementSuggestion(message)) {
                    // ç”¨æˆ·æ”¹è¿›å»ºè®®
                    setTimeout(() => {
                        addImprovementSuggestionResponse(message);
                    }, 1000);
                } else if (isThankfulForSolution(message)) {
                    // ç”¨æˆ·è¡¨è¾¾æ„Ÿè°¢ï¼ˆé—®é¢˜å·²è§£å†³ï¼‰
                    setTimeout(() => {
                        addThankfulResponse(message);
                    }, 1000);
                } else if (!isDreoRelatedQuestion(message)) {
                    // éDREOç›¸å…³é—®é¢˜
                    setTimeout(() => {
                        addNonDreoResponse(message);
                    }, 1000);
                } else {
                    // æ£€æŸ¥æ˜¯å¦ä¸ºå¤æ‚æŠ€æœ¯é—®é¢˜æˆ–çŸ¥è¯†åº“å¤–é—®é¢˜
                    if (isComplexOrUnknownQuestion(message)) {
                        // æœªæ‰¾åˆ°å¯¹åº”è§£å†³æ–¹æ¡ˆ
                        setTimeout(() => {
                            addNoSolutionFoundResponse(message);
                        }, 1000);
                    } else {
                        // æ¨¡æ‹ŸAIå›å¤
                        setTimeout(() => {
                            const responses = [
                                "æ„Ÿè°¢æ‚¨çš„é—®é¢˜ï¼æˆ‘æ­£åœ¨ä¸ºæ‚¨æŸ¥æ‰¾ç›¸å…³ä¿¡æ¯...",
                                "æ ¹æ®æ‚¨çš„æè¿°ï¼Œæˆ‘å»ºè®®æ‚¨å¯ä»¥å°è¯•ä»¥ä¸‹è§£å†³æ–¹æ¡ˆ...",
                                "è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é—®é¢˜ï¼è®©æˆ‘ä¸ºæ‚¨è¯¦ç»†è§£ç­”...",
                                "æˆ‘ç†è§£æ‚¨çš„å›°æ‰°ï¼Œè¿™é‡Œæœ‰ä¸€äº›å¯èƒ½çš„è§£å†³æ–¹æ³•..."
                            ];
                            const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                            addMessage('ai', randomResponse);
                        }, 1500);
                    }
                }
            }
        }

        // æ£€æµ‹æ˜¯å¦ä¸ºè®¢å•ç›¸å…³é—®é¢˜ï¼ˆé€€/æ¢è´§ã€ç”³è¯·ä¼˜æƒ ï¼‰
        function isOrderRelatedInquiry(message) {
            const orderKeywords = [
                // é€€è´§ç›¸å…³
                'é€€è´§', 'é€€æ¬¾', 'é€€å›', 'é€€æ‰', 'ä¸è¦äº†', 'æƒ³é€€',
                'ç”³è¯·é€€è´§', 'å¦‚ä½•é€€è´§', 'é€€è´§æµç¨‹', 'é€€è´§æ”¿ç­–',
                'é€€è´§æ¡ä»¶', 'é€€è´§æ—¶é—´', 'é€€è´§æœŸé™', 
                
                // æ¢è´§ç›¸å…³
                'æ¢è´§', 'æ›´æ¢', 'è°ƒæ¢', 'æ¢ä¸€ä¸ª', 'é‡æ–°å‘',
                'ç”³è¯·æ¢è´§', 'å¦‚ä½•æ¢è´§', 'æ¢è´§æµç¨‹', 'æ¢è´§æ”¿ç­–',
                'æ¢è´§æ¡ä»¶', 'æ¢æ–°çš„', 'æ¢åˆ«çš„',
                
                // ä¼˜æƒ ç›¸å…³
                'ä¼˜æƒ ', 'æ‰“æŠ˜', 'æŠ˜æ‰£', 'é™ä»·', 'ä¾¿å®œ', 'å‡ä»·',
                'ä¼˜æƒ åˆ¸', 'æŠ˜æ‰£ç ', 'ä¼˜æƒ ç ', 'ä¿ƒé”€ç ', 'ä»£é‡‘åˆ¸',
                'ç”³è¯·ä¼˜æƒ ', 'ç”³è¯·æŠ˜æ‰£', 'æœ‰ä¼˜æƒ å—', 'æœ‰æŠ˜æ‰£å—',
                'ä¼˜æƒ æ´»åŠ¨', 'ä¿ƒé”€æ´»åŠ¨', 'ç‰¹ä»·', 'æ´»åŠ¨ä»·',
                'ä¼šå‘˜ä¼˜æƒ ', 'æ–°ç”¨æˆ·ä¼˜æƒ ', 'é¦–è´­ä¼˜æƒ ', 
                
                // è®¢å•çŠ¶æ€ç›¸å…³
                'è®¢å•çŠ¶æ€', 'è®¢å•æŸ¥è¯¢', 'ç‰©æµæŸ¥è¯¢', 'å‘è´§äº†å—',
                'ä»€ä¹ˆæ—¶å€™å‘è´§', 'å¿«é€’ä¿¡æ¯', 'é…é€æ—¶é—´',
                'è®¢å•å·', 'è¿½è¸ªè®¢å•', 'æŸ¥çœ‹è®¢å•'
            ];

            const orderPatterns = [
                'ä¸æƒ³è¦äº†', 'ä¹°é”™äº†', 'ä¸åˆé€‚', 'ä¸æ»¡æ„',
                'è´¨é‡æœ‰é—®é¢˜', 'æœ‰ç‘•ç–µ', 'æœ‰é—®é¢˜', 'åäº†',
                'ç”¨ä¸äº†', 'ä¸å¥½ç”¨', 'æ•ˆæœä¸å¥½', 'ä¸ç¬¦åˆé¢„æœŸ',
                'å°ºå¯¸ä¸å¯¹', 'é¢œè‰²ä¸å¯¹', 'å‹å·ä¸å¯¹', 'æ¬¾å¼ä¸å¯¹',
                'èƒ½ä¾¿å®œç‚¹å—', 'æœ‰æ²¡æœ‰ä¼˜æƒ ', 'ä»·æ ¼èƒ½é™å—', 'èƒ½æ‰“æŠ˜å—',
                'ä»€ä¹ˆæ—¶å€™æœ‰æ´»åŠ¨', 'æœ‰ä¿ƒé”€å—', 'ä¼šé™ä»·å—'
            ];

            const lowerMessage = message.toLowerCase();
            
            // æ£€æŸ¥è®¢å•å…³é”®è¯
            const hasOrderKeywords = orderKeywords.some(keyword => 
                lowerMessage.includes(keyword.toLowerCase())
            );
            
            // æ£€æŸ¥è®¢å•æ¨¡å¼
            const hasOrderPatterns = orderPatterns.some(pattern => 
                lowerMessage.includes(pattern.toLowerCase())
            );

            return hasOrderKeywords || hasOrderPatterns;
        }

        // æ£€æµ‹æ˜¯å¦ä¸ºå¤æ‚æˆ–çŸ¥è¯†åº“å¤–é—®é¢˜
        function isComplexOrUnknownQuestion(message) {
            const complexKeywords = [
                // å¤æ‚æŠ€æœ¯é—®é¢˜
                'é›†æˆ', 'å…¼å®¹', 'åè®®', 'æ¥å£', 'ç®—æ³•', 'æ¶æ„', 'é©±åŠ¨', 'å›ºä»¶',
                'è®¤è¯', 'æ ‡å‡†', 'è§„èŒƒ', 'æµ‹è¯•', 'æ ¡å‡†', 'è°ƒè¯•', 'å¼€å‘',
                'äºŒæ¬¡å¼€å‘', 'å®šåˆ¶', 'SDK', 'API', 'å¼€æº', 'æºç ',
                
                // æ·±åº¦æŠ€æœ¯å‚æ•°
                'åŠŸç‡å› æ•°', 'è°æ³¢', 'ç”µç£å…¼å®¹', 'è¾å°„', 'ä¼ å¯¼', 'é™ç”µ',
                'EMC', 'EMI', 'CE', 'FCC', 'UL', 'CCC', 'RoHS',
                'åˆ†è´å€¼', 'dB', 'é¢‘è°±', 'æ»¤æ³¢', 'ä¿¡å™ªæ¯”', 'SNR',
                
                // ä¸“ä¸šç»´ä¿®é—®é¢˜
                'ç”µè·¯æ¿', 'ä¸»æ¿', 'èŠ¯ç‰‡', 'ä¼ æ„Ÿå™¨', 'ç”µæœº', 'å˜é¢‘',
                'ç”µå®¹', 'ç”µé˜»', 'æ™¶ä½“ç®¡', 'é›†æˆç”µè·¯', 'PCB', 'IC',
                'ç„Šæ¥', 'æ›´æ¢', 'æ‹†è§£', 'ç»„è£…', 'ç»´ä¿®æ‰‹å†Œ',
                
                // é«˜çº§åŠŸèƒ½éœ€æ±‚
                'è‡ªåŠ¨åŒ–', 'æ™ºèƒ½å­¦ä¹ ', 'æœºå™¨å­¦ä¹ ', 'AIè®­ç»ƒ', 'è¯­éŸ³è¯†åˆ«',
                'å›¾åƒè¯†åˆ«', 'ç¯å¢ƒå­¦ä¹ ', 'æ¨¡å¼è¯†åˆ«', 'é¢„æµ‹åˆ†æ',
                'æ•°æ®æŒ–æ˜', 'äº‘è®¡ç®—', 'è¾¹ç¼˜è®¡ç®—', 'IoTå¹³å°',
                
                // æ‰¹é‡æˆ–å•†ç”¨éœ€æ±‚
                'æ‰¹é‡', 'é‡‡è´­', 'æ‹›æ ‡', 'ä»£ç†', 'ç»é”€', 'åˆ†é”€',
                'é¡¹ç›®', 'å·¥ç¨‹', 'é›†æˆå•†', 'ç³»ç»Ÿé›†æˆ', 'B2B',
                'å•†ç”¨', 'å·¥ä¸šçº§', 'å®šåˆ¶åŒ–', 'ä¸ªæ€§åŒ–',
                
                // ç¬¬ä¸‰æ–¹é›†æˆ
                'HomeKit', 'Google Assistant', 'Amazon Alexa',
                'SmartThings', 'Zigbee', 'Z-Wave', 'Thread',
                'Matter', 'Home Assistant', 'å°ç±³', 'åä¸º'
            ];

            const specificTechnicalQuestions = [
                // å…·ä½“å‹å·çš„æ·±åº¦æŠ€æœ¯é—®é¢˜
                'å†…éƒ¨ç»“æ„', 'å·¥ä½œåŸç†', 'æ§åˆ¶é€»è¾‘', 'ä¼ æ„ŸåŸç†',
                'åŠ çƒ­åŸç†', 'åˆ¶å†·åŸç†', 'å‡€åŒ–åŸç†', 'ç”µæœºç±»å‹',
                'é£é“è®¾è®¡', 'æ°”æµç»„ç»‡', 'çƒ­äº¤æ¢', 'é™¤æ¹¿åŸç†',
                
                // è¯¦ç»†è§„æ ¼å‚æ•°
                'è¾“å…¥ç”µå‹èŒƒå›´', 'å¯åŠ¨ç”µæµ', 'å¾…æœºåŠŸè€—', 'æœ€å¤§åŠŸè€—',
                'å·¥ä½œæ¸©åº¦èŒƒå›´', 'å­˜å‚¨æ¸©åº¦', 'æ¹¿åº¦èŒƒå›´', 'æµ·æ‹”é«˜åº¦',
                'ç»ç¼˜ç­‰çº§', 'é˜²æŠ¤ç­‰çº§', 'IPç­‰çº§', 'æŠ—éœ‡ç­‰çº§',
                
                // ç¯å¢ƒé€‚åº”æ€§
                'é«˜åŸä½¿ç”¨', 'æåœ°ä½¿ç”¨', 'çƒ­å¸¦ä½¿ç”¨', 'æ²™æ¼ ä½¿ç”¨',
                'æµ·è¾¹ä½¿ç”¨', 'å·¥å‚ç¯å¢ƒ', 'åŒ»é™¢ä½¿ç”¨', 'å®éªŒå®¤',
                
                // ç‰¹æ®Šåº”ç”¨åœºæ™¯
                'è½¦è½½ä½¿ç”¨', 'èˆ¹èˆ¶ä½¿ç”¨', 'é£æœºä½¿ç”¨', 'æˆ·å¤–ä½¿ç”¨',
                'é˜²çˆ†ç¯å¢ƒ', 'æ´å‡€å®¤', 'æ— å°˜å®¤', 'æ’æ¸©æ’æ¹¿'
            ];

            const lowerMessage = message.toLowerCase();
            
            // æ£€æŸ¥æ˜¯å¦åŒ…å«å¤æ‚å…³é”®è¯
            const hasComplexKeywords = complexKeywords.some(keyword => 
                lowerMessage.includes(keyword.toLowerCase())
            );
            
            // æ£€æŸ¥æ˜¯å¦åŒ…å«ä¸“ä¸šæŠ€æœ¯é—®é¢˜
            const hasSpecificTechnical = specificTechnicalQuestions.some(question => 
                lowerMessage.includes(question.toLowerCase())
            );
            
            // æ£€æŸ¥æ˜¯å¦ä¸ºéå¸¸å…·ä½“çš„å‹å·æŠ€æœ¯é—®é¢˜
            const hasModelWithTechnical = (
                (lowerMessage.includes('dr-') || lowerMessage.includes('nomad')) &&
                (lowerMessage.includes('åŸç†') || lowerMessage.includes('æ„é€ ') || 
                 lowerMessage.includes('å†…éƒ¨') || lowerMessage.includes('ç”µè·¯') ||
                 lowerMessage.includes('æŠ€æœ¯') || lowerMessage.includes('å‚æ•°è¡¨') ||
                 lowerMessage.includes('è§„æ ¼ä¹¦') || lowerMessage.includes('è¯´æ˜ä¹¦ä¸‹è½½'))
            );
            
            // æ£€æŸ¥é—®é¢˜é•¿åº¦å’Œå¤æ‚æ€§ (è¶…é•¿ä¸”åŒ…å«å¤šä¸ªæŠ€æœ¯è¯æ±‡)
            const isComplexLongQuestion = (
                message.length > 100 && 
                (message.match(/[ï¼Ÿ?]/g) || []).length >= 2 &&
                (complexKeywords.filter(keyword => 
                    lowerMessage.includes(keyword.toLowerCase())).length >= 2)
            );
            
            return hasComplexKeywords || hasSpecificTechnical || hasModelWithTechnical || isComplexLongQuestion;
        }

        // æ£€æµ‹æ˜¯å¦è¯·æ±‚è½¬äººå·¥
        function isRequestForHumanAgent(message) {
            const keywords = [
                'è½¬äººå·¥', 'äººå·¥å®¢æœ', 'äººå·¥æœåŠ¡', 'çœŸäººå®¢æœ', 'è”ç³»å®¢æœ',
                'å·¥å•', 'æŠ•è¯‰', 'ç”³è¯·é€€æ¢', 'é€€è´§', 'æ¢è´§', 'é€€æ¬¾',
                'ä¸æ»¡æ„', 'è§£å†³ä¸äº†', 'æ²¡æœ‰è§£å†³', 'è¿˜æ˜¯ä¸è¡Œ',
                'è¦æ±‚èµ”å¿', 'è´¨é‡é—®é¢˜', 'æ•…éšœä¸¥é‡', 'ç´§æ€¥é—®é¢˜', 'äººå·¥', 'äººå·¥æ”¯æŒ'
            ];
            
            const lowerMessage = message.toLowerCase();
            return keywords.some(keyword => 
                lowerMessage.includes(keyword) || 
                lowerMessage.includes(keyword.toLowerCase())
            );
        }

        // æ£€æµ‹æ˜¯å¦ä¸ºäº§å“å¯¹æ¯”è¯¢é—®
        function isProductComparison(message) {
            const comparisonKeywords = [
                'å¯¹æ¯”', 'æ¯”è¾ƒ', 'åŒºåˆ«', 'å·®å¼‚', 'ä¸åŒ', 'å“ªä¸ªå¥½', 'æ¨èå“ªæ¬¾',
                'é€‰æ‹©', 'ä¼˜ç¼ºç‚¹', 'ä¼˜åŠ£', 'vs', 'VS', 'å’Œ', 'ä¸'
            ];
            
            const productKeywords = [
                'DR-HHM002S', 'DR-HHM003S', 'Nomad One', 'åŠ æ¹¿å™¨', 'å¡”æ‰‡', 
                'ç©ºæ°”å‡€åŒ–å™¨', 'é£æ‰‡', 'æš–é£æœº', 'é™¤æ¹¿æœº'
            ];
            
            const lowerMessage = message.toLowerCase();
            
            // æ£€æŸ¥æ˜¯å¦åŒ…å«å¯¹æ¯”å…³é”®è¯å’Œäº§å“å…³é”®è¯
            const hasComparison = comparisonKeywords.some(keyword => 
                lowerMessage.includes(keyword.toLowerCase())
            );
            
            const hasProduct = productKeywords.some(keyword => 
                lowerMessage.includes(keyword.toLowerCase())
            );
            
            // æˆ–è€…æ£€æŸ¥æ˜¯å¦åŒ…å«å¤šä¸ªäº§å“å‹å·
            const productMatches = productKeywords.filter(keyword => 
                lowerMessage.includes(keyword.toLowerCase())
            );
            
            return (hasComparison && hasProduct) || productMatches.length >= 2;
        }

        // æ£€æµ‹æ˜¯å¦ä¸ºç¤¼è²Œæ€§é—®å¥½
        function isGreeting(message) {
            const greetingKeywords = [
                'hello', 'hi', 'hey', 'ä½ å¥½', 'æ‚¨å¥½', 'æ—©ä¸Šå¥½', 'ä¸‹åˆå¥½', 'æ™šä¸Šå¥½',
                'æ—©å®‰', 'æ™šå®‰', 'å¥½çš„', 'è°¢è°¢', 'æ„Ÿè°¢', 'å†è§', 'æ‹œæ‹œ',
                'ç¬¬ä¸€æ¬¡', 'åˆæ¬¡', 'å¼€å§‹', 'å’¨è¯¢'
            ];

            const lowerMessage = message.toLowerCase().trim();
            
            // æ£€æŸ¥æ˜¯å¦ä¸ºç®€å•çš„é—®å¥½
            if (lowerMessage.length <= 10) {
                return greetingKeywords.some(keyword => 
                    lowerMessage.includes(keyword.toLowerCase()) ||
                    lowerMessage === keyword.toLowerCase()
                );
            }

            // æ£€æŸ¥æ˜¯å¦ä»¥é—®å¥½å¼€å¤´
            return greetingKeywords.some(keyword => 
                lowerMessage.startsWith(keyword.toLowerCase())
            );
        }

        // æ£€æµ‹æ˜¯å¦ä¸ºå…¶ä»–å“ç‰Œé—®é¢˜
        function isOtherBrandQuestion(message) {
            const otherBrands = [
                // å›½é™…å“ç‰Œ
                'dyson', 'æˆ´æ£®', 'xiaomi', 'å°ç±³', 'philips', 'é£åˆ©æµ¦', 'panasonic', 'æ¾ä¸‹',
                'sharp', 'å¤æ™®', 'daikin', 'å¤§é‡‘', 'mitsubishi', 'ä¸‰è±', 'gree', 'æ ¼åŠ›',
                'haier', 'æµ·å°”', 'midea', 'ç¾çš„', 'aux', 'å¥¥å…‹æ–¯', 'tcl', 'TCL',
                'changhong', 'é•¿è™¹', 'hisense', 'æµ·ä¿¡', 'konka', 'åº·ä½³', 'skyworth', 'åˆ›ç»´',
                // ç©ºè°ƒå“ç‰Œ
                'carrier', 'å¼€åˆ©', 'trane', 'ç‰¹çµ', 'york', 'çº¦å…‹', 'mcquay', 'éº¦å…‹ç»´å°”',
                // å°å®¶ç”µå“ç‰Œ
                'bear', 'å°ç†Š', 'joyoung', 'ä¹é˜³', 'supor', 'è‹æ³Šå°”', 'povos', 'å¥”è…¾',
                'aca', 'ACA', 'royalstar', 'è£äº‹è¾¾', 'galanz', 'æ ¼å…°ä»•'
            ];

            const productCategories = [
                'åŠ æ¹¿å™¨', 'é™¤æ¹¿æœº', 'ç©ºæ°”å‡€åŒ–å™¨', 'é£æ‰‡', 'å¡”æ‰‡', 'ç©ºè°ƒ', 'æš–é£æœº',
                'ç©ºè°ƒæ‰‡', 'å¾ªç¯æ‰‡', 'å¸å°˜å™¨', 'æ‰«åœ°æœºå™¨äºº', 'ç©ºæ°”ç‚¸é”…'
            ];

            const lowerMessage = message.toLowerCase();

            // æ£€æŸ¥æ˜¯å¦æåˆ°å…¶ä»–å“ç‰Œ
            const hasOtherBrand = otherBrands.some(brand => 
                lowerMessage.includes(brand.toLowerCase())
            );

            // æ£€æŸ¥æ˜¯å¦æåˆ°äº§å“å“ç±»
            const hasProductCategory = productCategories.some(category => 
                lowerMessage.includes(category)
            );

            // ç¡®ä¿ä¸æ˜¯DREOç›¸å…³é—®é¢˜
            const isDreoMentioned = lowerMessage.includes('dreo') || lowerMessage.includes('DREO');

            return hasOtherBrand && hasProductCategory && !isDreoMentioned;
        }

        // æ£€æµ‹æ˜¯å¦ä¸ºç”¨æˆ·ä¸æ»¡è¡¨è¾¾
        function isDissatisfiedWithService(message) {
            const dissatisfactionKeywords = [
                // ç›´æ¥ä¸æ»¡è¯æ±‡
                'ä¸æ»¡æ„', 'ä¸è¡Œ', 'æ²¡ç”¨', 'æ— èŠ', 'å·®åŠ²', 'ç³Ÿç³•', 'åƒåœ¾', 'åºŸç‰©',
                'ä¸å¥½', 'å¾ˆå·®', 'å¤ªå·®', 'ä¸å¤Ÿå¥½', 'ä¸åˆæ ¼', 'å¤±æœ›', 'å¾ˆå¤±æœ›',
                
                // æƒ…ç»ªè¡¨è¾¾
                'ç”Ÿæ°”', 'æ„¤æ€’', 'çƒ¦èº', 'éƒé—·', 'æ¼ç«', 'æ°”æ­»äº†', 'çƒ¦æ­»äº†',
                'æ— è¯­', 'æ— å¥ˆ', 'å´©æºƒ', 'æŠ“ç‹‚', 'å—ä¸äº†', 'å¿æ— å¯å¿',
                
                // å¦å®šè¯„ä»·
                'æ¯«æ— ç”¨å¤„', 'ä¸€ç‚¹ç”¨éƒ½æ²¡æœ‰', 'å®Œå…¨æ²¡ç”¨', 'æ ¹æœ¬ä¸è¡Œ', 'å¤ªåƒåœ¾äº†',
                'ä»€ä¹ˆé¬¼', 'ä»€ä¹ˆç©æ„', 'å‘çˆ¹', 'å‘äºº', 'éª—äºº', 'å¿½æ‚ ',
                
                // æŠ•è¯‰ç›¸å…³
                'æŠ•è¯‰', 'ä¸¾æŠ¥', 'å·®è¯„', 'é€€é’±', 'è¦æ±‚èµ”å¿', 'æ‰¾é¢†å¯¼', 'æ‰¾ç»ç†',
                'å®¢æœä¸è¡Œ', 'æœåŠ¡å¤ªå·®', 'æ€åº¦ä¸å¥½', 'ä¸ä¸“ä¸š',
                
                // å¯¹AIèƒ½åŠ›çš„è´¨ç–‘
                'ä¸æ™ºèƒ½', 'å¤ªç¬¨', 'ç¬¨æ­»äº†', 'æ™ºéšœ', 'äººå·¥æ™ºéšœ', 'æœºå™¨äººå¤ªç¬¨',
                'ä¸€ç‚¹éƒ½ä¸èªæ˜', 'å›ç­”ä¸å¯¹', 'ç­”éæ‰€é—®', 'ç‰›å¤´ä¸å¯¹é©¬å˜´',
                
                // æ¯”è¾ƒæ€§ä¸æ»¡
                'è¿˜ä¸å¦‚', 'è¿˜æ²¡æœ‰', 'æ¯”ä¸ä¸Š', 'ä¸å¦‚åˆ«å®¶', 'å…¶ä»–å®¶æ›´å¥½',
                
                // è‹±æ–‡ä¸æ»¡
                'terrible', 'awful', 'bad', 'worst', 'useless', 'stupid',
                'disappointed', 'angry', 'frustrated', 'annoying'
            ];

            const frustratedExpressions = [
                // æŒ«æŠ˜è¡¨è¾¾
                'è¯•äº†å¥½å¤šæ¬¡', 'è¯•äº†å¾ˆä¹…', 'æŠ˜è…¾äº†åŠå¤©', 'æµªè´¹æ—¶é—´',
                'è¶Šæ¥è¶Šçƒ¦', 'å¿ƒç´¯', 'å¤´ç–¼', 'éº»çƒ¦æ­»äº†',
                
                // æœŸæœ›è½å·®
                'ä¸æ˜¯æˆ‘æƒ³è¦çš„', 'ä¸ç¬¦åˆé¢„æœŸ', 'å’Œè¯´çš„ä¸ä¸€æ ·', 'éª—æˆ‘',
                'è¯´å¥½çš„å‘¢', 'æ‰¿è¯ºå‘¢', 'æ€ä¹ˆå›äº‹', 'æä»€ä¹ˆ',
                
                // é‡å¤é—®é¢˜è¡¨è¾¾
                'è¯´äº†å¤šå°‘é', 'é—®äº†å¥½å¤šæ¬¡', 'é‡å¤äº†å¾ˆå¤šé', 'è¿˜æ˜¯æ²¡æ‡‚',
                'åˆæ¥è¿™å¥—', 'è€æ˜¯è¿™æ ·', 'æ¯æ¬¡éƒ½æ˜¯', 'è¿˜æ˜¯è€æ ·å­'
            ];

            const negativeEmoticons = [
                // è´Ÿé¢è¡¨æƒ…
                'ğŸ˜¡', 'ğŸ˜ ', 'ğŸ¤¬', 'ğŸ˜¤', 'ğŸ˜’', 'ğŸ™„', 'ğŸ˜‘', 'ğŸ˜',
                'ğŸ’¢', 'ğŸ˜', 'ğŸ˜”', 'ğŸ˜­', 'ğŸ˜©', 'ğŸ˜«', 'ğŸ¤¦', 'ğŸ¤·'
            ];

            const lowerMessage = message.toLowerCase();
            
            // æ£€æŸ¥æ˜¯å¦åŒ…å«ä¸æ»¡å…³é”®è¯
            const hasDissatisfactionKeywords = dissatisfactionKeywords.some(keyword => 
                lowerMessage.includes(keyword.toLowerCase())
            );
            
            // æ£€æŸ¥æ˜¯å¦åŒ…å«æŒ«æŠ˜è¡¨è¾¾
            const hasFrustratedExpressions = frustratedExpressions.some(expr => 
                lowerMessage.includes(expr.toLowerCase())
            );
            
            // æ£€æŸ¥æ˜¯å¦åŒ…å«è´Ÿé¢è¡¨æƒ…
            const hasNegativeEmoticons = negativeEmoticons.some(emoticon => 
                message.includes(emoticon)
            );
            
            // æ£€æŸ¥å¦å®šæ€§é—®å¥
            const negativeQuestions = [
                'ä¸ºä»€ä¹ˆä¸', 'æ€ä¹ˆä¸', 'èƒ½ä¸èƒ½', 'ä¼šä¸ä¼š', 'éš¾é“ä¸',
                'ä½ ä»¬æ˜¯ä¸æ˜¯', 'åˆ°åº•è¡Œä¸è¡Œ', 'ä»€ä¹ˆæ„æ€', 'å¼€ä»€ä¹ˆç©ç¬‘'
            ];
            
            const hasNegativeQuestions = negativeQuestions.some(question => 
                lowerMessage.includes(question)
            );
            
            // æ£€æŸ¥è¿ç»­å¦å®š
            const hasMultipleNegatives = (
                (message.match(/ä¸/g) || []).length >= 2 ||
                (message.match(/æ²¡/g) || []).length >= 2 ||
                (message.includes('ä¸') && message.includes('æ²¡'))
            );
            
            // æ£€æŸ¥ç‰¹å®šä¸æ»¡å¥å¼
            const dissatisfactionPatterns = [
                'è¿™ä»€ä¹ˆ.*æœåŠ¡', 'ä»€ä¹ˆ.*å®¢æœ', 'å¤ª.*äº†', 'ä¸€ç‚¹.*æ²¡æœ‰',
                'å®Œå…¨.*ä¸', 'æ ¹æœ¬.*ä¸', 'æ€ä¹ˆ.*è¿™æ ·', 'ä¸ºä»€ä¹ˆ.*ä¸'
            ];
            
            const hasDissatisfactionPattern = dissatisfactionPatterns.some(pattern => {
                const regex = new RegExp(pattern, 'i');
                return regex.test(message);
            });
            
            // æ’é™¤è¯¯åˆ¤ï¼šæ­£å¸¸çš„æŠ€æœ¯é—®é¢˜è¯¢é—®
            const isTechnicalQuestion = [
                'æ€ä¹ˆè®¾ç½®', 'å¦‚ä½•ä½¿ç”¨', 'æ€ä¹ˆæ“ä½œ', 'æ€ä¹ˆè¿æ¥', 'æ€ä¹ˆå®‰è£…',
                'ä¸ºä»€ä¹ˆä¼š', 'ä»€ä¹ˆåŸå› ', 'æ€ä¹ˆè§£å†³', 'å¦‚ä½•ä¿®å¤'
            ].some(tech => lowerMessage.includes(tech));
            
            // å¦‚æœæ˜¯æŠ€æœ¯é—®é¢˜ï¼Œå³ä½¿åŒ…å«"ä¸ºä»€ä¹ˆä¸"ç­‰è¯æ±‡ä¹Ÿä¸ç®—ä¸æ»¡
            if (isTechnicalQuestion && !hasDissatisfactionKeywords) {
                return false;
            }
            
            return hasDissatisfactionKeywords || hasFrustratedExpressions || hasNegativeEmoticons || 
                   (hasNegativeQuestions && hasMultipleNegatives) || hasDissatisfactionPattern;
        }

        // æ£€æµ‹æ˜¯å¦ä¸ºæ„Ÿè°¢è¡¨è¾¾ï¼ˆé—®é¢˜å·²è§£å†³ï¼‰
        function isThankfulForSolution(message) {
            const thanksKeywords = [
                // ç›´æ¥æ„Ÿè°¢è¯
                'è°¢è°¢', 'æ„Ÿè°¢', 'å¤šè°¢', 'è°¢äº†', 'thanks', 'thank', '3q', '3Q',
                
                // æ„Ÿè°¢å¥å¼
                'è°¢è°¢ä½ ', 'æ„Ÿè°¢æ‚¨', 'å¤šè°¢äº†', 'è°¢è°¢æ‚¨çš„', 'æ„Ÿè°¢ä½ çš„',
                'éå¸¸æ„Ÿè°¢', 'ååˆ†æ„Ÿè°¢', 'çœŸçš„è°¢è°¢', 'å¤ªæ„Ÿè°¢äº†',
                
                // é—®é¢˜è§£å†³è¡¨è¾¾
                'è§£å†³äº†', 'æå®šäº†', 'å¼„å¥½äº†', 'ä¿®å¥½äº†', 'å¥½äº†', 'è¡Œäº†',
                'å¯ä»¥äº†', 'æ²¡é—®é¢˜äº†', 'æ­£å¸¸äº†', 'ç®¡ç”¨', 'æœ‰ç”¨', 'æœ‰æ•ˆ',
                'æˆåŠŸäº†', 'æ¢å¤äº†', 'å·¥ä½œäº†', 'è¿è¡Œäº†',
                
                // ç§¯æåé¦ˆ
                'å¾ˆæœ‰å¸®åŠ©', 'å¸®äº†å¤§å¿™', 'å¸®åŠ©å¾ˆå¤§', 'çœŸæœ‰ç”¨', 'ç¡®å®æœ‰æ•ˆ',
                'é—®é¢˜è§£å†³', 'å·²ç»è§£å†³', 'ç»ˆäºå¥½äº†', 'æœç„¶å¯ä»¥'
            ];

            const solutionIndicators = [
                // è§£å†³çŠ¶æ€
                'æŒ‰ç…§ä½ çš„', 'æŒ‰ä½ è¯´çš„', 'ç…§ä½ çš„æ–¹æ³•', 'æ ¹æ®ä½ çš„å»ºè®®',
                'æŒ‰ç…§æ‚¨çš„', 'æŒ‰æ‚¨è¯´çš„', 'ç…§æ‚¨çš„æ–¹æ³•', 'æ ¹æ®æ‚¨çš„å»ºè®®',
                'è¯•äº†ä¸€ä¸‹', 'å°è¯•äº†', 'æ“ä½œäº†', 'æŒ‰ç…§æ“ä½œ',
                
                // æˆåŠŸè¡¨è¾¾
                'æˆåŠŸ', 'æå®š', 'è§£å†³', 'ä¿®å¤', 'æ¢å¤', 'æ­£å¸¸',
                'å¯ä»¥', 'èƒ½ç”¨', 'ç®¡ç”¨', 'æœ‰æ•ˆ', 'å¥½ä½¿', 'å·¥ä½œ',
                
                // æ„Ÿè°¢+è§£å†³ç»„åˆ
                'å¸®æˆ‘è§£å†³', 'å¸®å¿™è§£å†³', 'å‘Šè¯‰æˆ‘æ€ä¹ˆ', 'æ•™æˆ‘æ€ä¹ˆ',
                'æŒ‡å¯¼æˆ‘', 'å¸®åŠ©æˆ‘', 'è®©æˆ‘çŸ¥é“'
            ];

            const lowerMessage = message.toLowerCase();
            
            // æ£€æŸ¥æ˜¯å¦åŒ…å«æ„Ÿè°¢å…³é”®è¯
            const hasThanksKeywords = thanksKeywords.some(keyword => 
                lowerMessage.includes(keyword.toLowerCase())
            );
            
            // æ£€æŸ¥æ˜¯å¦åŒ…å«è§£å†³æ–¹æ¡ˆæŒ‡ç¤ºè¯
            const hasSolutionIndicators = solutionIndicators.some(indicator => 
                lowerMessage.includes(indicator.toLowerCase())
            );
            
            // æ£€æŸ¥ç§¯ææƒ…ç»ªè¡¨è¾¾
            const positiveExpressions = [
                'ğŸ‘', 'ğŸ‘', 'âœ…', 'ğŸ’¯', 'ğŸ‰', 'ğŸ˜Š', 'ğŸ˜', 'ğŸ™‚',
                'æ£’', 'èµ', 'å¥½', 'å¦™', 'å‰å®³', 'ç»™åŠ›', 'ä¸é”™'
            ];
            
            const hasPositiveExpression = positiveExpressions.some(expr => 
                message.includes(expr)
            );
            
            // æ’é™¤çº¯ç²¹çš„å®¢å¥—è¯ï¼ˆæ²¡æœ‰å®è´¨å†…å®¹ï¼‰
            const isEmptyThanks = (
                message.trim().length <= 10 && 
                (message.includes('è°¢è°¢') || message.includes('æ„Ÿè°¢')) &&
                !hasSolutionIndicators
            );
            
            // æ£€æŸ¥æ˜¯å¦åŒæ—¶åŒ…å«æ„Ÿè°¢å’Œè§£å†³æ–¹æ¡ˆç›¸å…³å†…å®¹
            const isThankfulForHelp = hasThanksKeywords && (hasSolutionIndicators || hasPositiveExpression);
            
            // æ£€æŸ¥ç‰¹å®šçš„æ„Ÿè°¢+è§£å†³å¥å¼
            const specificPatterns = [
                'è°¢è°¢.*è§£å†³', 'æ„Ÿè°¢.*å¸®', 'å¤šè°¢.*å‘Šè¯‰', 'è°¢è°¢.*æ•™',
                'thanks.*help', 'thank.*solv', 'æŒ‰.*è°¢è°¢', 'ç…§.*æ„Ÿè°¢'
            ];
            
            const hasSpecificPattern = specificPatterns.some(pattern => {
                const regex = new RegExp(pattern, 'i');
                return regex.test(message);
            });
            
            // é¿å…è¯¯åˆ¤ï¼šæ’é™¤æ±‚åŠ©ç±»é—®é¢˜
            const isStillAskingForHelp = [
                'è¿˜', 'ä½†æ˜¯', 'ä¸è¿‡', 'å¯æ˜¯', 'ç„¶è€Œ', 'è¿˜æœ‰', 'å¦å¤–',
                'ç»§ç»­', 'æ¥ä¸‹æ¥', 'ä¸‹ä¸€æ­¥', 'è¿˜éœ€è¦', 'æ€ä¹ˆåŠ'
            ].some(word => lowerMessage.includes(word));
            
            // å¦‚æœè¿˜åœ¨æ±‚åŠ©ï¼Œä¸ç®—æ˜¯æ„Ÿè°¢è§£å†³
            if (isStillAskingForHelp) {
                return false;
            }
            
            return isThankfulForHelp || hasSpecificPattern || (hasThanksKeywords && !isEmptyThanks && message.length > 6);
        }

        // æ£€æµ‹æ˜¯å¦ä¸ºæ”¹è¿›å»ºè®®
        function isImprovementSuggestion(message) {
            const suggestionKeywords = [
                // ç›´æ¥å»ºè®®ç±»
                'å»ºè®®', 'æ„è§', 'åé¦ˆ', 'æƒ³æ³•', 'æè®®', 'çœ‹æ³•', 'è§‚ç‚¹',
                'å¸Œæœ›', 'æœŸæœ›', 'èƒ½ä¸èƒ½', 'å¯å¦', 'å¯ä»¥è€ƒè™‘', 'æœ€å¥½',
                
                // æ”¹è¿›ç±»
                'æ”¹è¿›', 'ä¼˜åŒ–', 'æå‡', 'å®Œå–„', 'åŠ å¼º', 'æ”¹å–„', 'å‡çº§',
                'æ›´æ–°', 'å¢åŠ ', 'æ·»åŠ ', 'æ–°å¢', 'æ‰©å±•', 'æ”¯æŒ',
                
                // é—®é¢˜æŒ‡å‡ºç±»
                'é—®é¢˜', 'ä¸è¶³', 'ç¼ºç‚¹', 'ä¸æ–¹ä¾¿', 'éº»çƒ¦', 'å›°éš¾',
                'ä¸å¤Ÿ', 'å¤ªå°‘', 'å¤ªæ…¢', 'ä¸å¥½ç”¨', 'ä½“éªŒå·®',
                
                // åŠŸèƒ½éœ€æ±‚ç±»
                'åŠŸèƒ½', 'ç‰¹æ€§', 'é€‰é¡¹', 'æ¨¡å¼', 'è®¾ç½®', 'é…ç½®',
                'ç•Œé¢', 'æ“ä½œ', 'æ§åˆ¶', 'æ˜¾ç¤º', 'æé†’', 'é€šçŸ¥',
                
                // äº§å“æ”¹è¿›ç±»
                'è®¾è®¡', 'å¤–è§‚', 'æè´¨', 'é¢œè‰²', 'å°ºå¯¸', 'é‡é‡',
                'å™ªéŸ³', 'æ•ˆæœ', 'æ€§èƒ½', 'ç»­èˆª', 'è€—ç”µ', 'å¯¿å‘½'
            ];

            const improvementContexts = [
                // æ”¹è¿›æ–¹å‘
                'dreo', 'DREO', 'äº§å“', 'è®¾å¤‡', 'æœºå™¨', 'åŠŸèƒ½', 'app', 'APP',
                'ç•Œé¢', 'æ“ä½œ', 'ä½¿ç”¨', 'ä½“éªŒ', 'æœåŠ¡', 'å®¢æœ',
                
                // å…·ä½“äº§å“
                'DR-HHM002S', 'DR-HHM003S', 'Nomad One', 'åŠ æ¹¿å™¨', 'å¡”æ‰‡',
                'é£æ‰‡', 'æš–é£æœº', 'é™¤æ¹¿æœº', 'ç©ºæ°”å‡€åŒ–å™¨'
            ];

            const lowerMessage = message.toLowerCase();
            
            // æ£€æŸ¥æ˜¯å¦åŒ…å«å»ºè®®å…³é”®è¯
            const hasSuggestionKeywords = suggestionKeywords.some(keyword => 
                lowerMessage.includes(keyword.toLowerCase())
            );
            
            // æ£€æŸ¥æ˜¯å¦åŒ…å«æ”¹è¿›ä¸Šä¸‹æ–‡
            const hasImprovementContext = improvementContexts.some(context => 
                lowerMessage.includes(context.toLowerCase())
            );
            
            // æ£€æŸ¥æ˜¯å¦åŒ…å«ç–‘é—®å¥æˆ–å»ºè®®å¥å¼
            const suggestionPatterns = [
                'èƒ½å¦', 'å¯å¦', 'å¯ä»¥', 'å¸Œæœ›', 'å»ºè®®', 'æœ€å¥½', 'åº”è¯¥',
                'å¦‚æœ', 'è¦æ˜¯', 'å»ºè®®ä½ ä»¬', 'ä½ ä»¬å¯ä»¥', 'å¸Œæœ›èƒ½å¤Ÿ'
            ];
            
            const hasSuggestionPattern = suggestionPatterns.some(pattern => 
                lowerMessage.includes(pattern)
            );
            
            // æ’é™¤æ˜æ˜¾çš„é—®é¢˜æ±‚åŠ©ï¼ˆé¿å…è¯¯åˆ¤ï¼‰
            const helpKeywords = [
                'æ€ä¹ˆåŠ', 'å¦‚ä½•è§£å†³', 'ä»€ä¹ˆåŸå› ', 'ä¸ºä»€ä¹ˆ', 'æ€ä¹ˆç”¨',
                'ä¸ä¼šç”¨', 'ç”¨ä¸äº†', 'åäº†', 'æ•…éšœ', 'ç»´ä¿®'
            ];
            
            const isHelpRequest = helpKeywords.some(keyword => 
                lowerMessage.includes(keyword)
            );
            
            // å¦‚æœæ˜¯æ±‚åŠ©è¯·æ±‚ï¼Œä¸åˆ¤æ–­ä¸ºå»ºè®®
            if (isHelpRequest) {
                return false;
            }
            
            // æ»¡è¶³å»ºè®®å…³é”®è¯ä¸”æœ‰ç›¸å…³ä¸Šä¸‹æ–‡ï¼Œæˆ–è€…æœ‰å»ºè®®å¥å¼
            return (hasSuggestionKeywords && hasImprovementContext) || hasSuggestionPattern;
        }

        // æ£€æµ‹æ˜¯å¦ä¸ºäº§å“æ¨èè¯·æ±‚
        function isProductRecommendationRequest(message) {
            const recommendationKeywords = [
                'æ¨è', 'å»ºè®®', 'é€‰æ‹©', 'ä¹°ä»€ä¹ˆ', 'å“ªæ¬¾å¥½', 'å“ªä¸ªå¥½', 'ä»€ä¹ˆå‹å·',
                'é€‚åˆ', 'æ€§ä»·æ¯”', 'å€¼å¾—ä¹°', 'å…¥æ‰‹', 'è´­ä¹°å»ºè®®', 'æ€ä¹ˆé€‰',
                'æœ€å¥½çš„', 'æœ€é€‚åˆ', 'æœ€æ¨è', 'é¦–é€‰', 'ä¼˜é€‰'
            ];

            const purposeKeywords = [
                'å®¢å…', 'å§å®¤', 'ä¹¦æˆ¿', 'åŠå…¬å®¤', 'å©´å„¿æˆ¿', 'è€äººæˆ¿',
                'å°æˆ·å‹', 'å¤§æˆ¿é—´', 'å¹²ç‡¥', 'æ½®æ¹¿', 'è¿‡æ•', 'å°å­©',
                'è€äºº', 'å­•å¦‡', 'å® ç‰©', 'æ¤ç‰©', 'æ–°æˆ¿', 'è£…ä¿®'
            ];

            const lowerMessage = message.toLowerCase();

            // æ£€æŸ¥æ˜¯å¦åŒ…å«æ¨èå…³é”®è¯
            const hasRecommendation = recommendationKeywords.some(keyword => 
                lowerMessage.includes(keyword)
            );

            // æ£€æŸ¥æ˜¯å¦åŒ…å«ä½¿ç”¨åœºæ™¯æˆ–ç›®çš„
            const hasPurpose = purposeKeywords.some(keyword => 
                lowerMessage.includes(keyword)
            );

            // æ£€æŸ¥æ˜¯å¦æåˆ°äº†DREOäº§å“ç±»åˆ«
            const productTypes = ['åŠ æ¹¿å™¨', 'é£æ‰‡', 'å¡”æ‰‡', 'å®¶ç”µ', 'äº§å“'];
            const hasProductType = productTypes.some(type => 
                lowerMessage.includes(type)
            );

            return hasRecommendation && (hasPurpose || hasProductType);
        }

        // æ£€æµ‹æ˜¯å¦ä¸ºDREOç›¸å…³é—®é¢˜
        function isDreoRelatedQuestion(message) {
            const dreoKeywords = [
                // å“ç‰Œç›¸å…³
                'dreo', 'DREO', 'å¾·é¾™', 
                // äº§å“å‹å·
                'DR-HHM002S', 'DR-HHM003S', 'Nomad One', 'DR-', 
                // äº§å“ç±»å‹
                'åŠ æ¹¿å™¨', 'å¡”æ‰‡', 'é£æ‰‡', 'ç©ºæ°”å‡€åŒ–å™¨', 'æš–é£æœº', 'é™¤æ¹¿æœº', 'ç©ºè°ƒæ‰‡',
                'æ™ºèƒ½å®¶ç”µ', 'æ™ºèƒ½äº§å“', 'å®¶ç”µ', 'ç”µå™¨',
                // åŠŸèƒ½ç›¸å…³
                'åŠ æ¹¿', 'åˆ¶å†·', 'åˆ¶çƒ­', 'å‡€åŒ–', 'é™¤æ¹¿', 'é™æ¸©', 'å‡æ¸©', 'é£é€Ÿ', 'å™ªéŸ³',
                'é¥æ§', 'APPæ§åˆ¶', 'å®šæ—¶', 'æ¹¿åº¦', 'æ¸©åº¦', 'é£åŠ›',
                // é—®é¢˜ç›¸å…³
                'æ•…éšœ', 'ç»´ä¿®', 'ä¿ä¿®', 'å”®å', 'é…ä»¶', 'ä½¿ç”¨è¯´æ˜', 'å®‰è£…', 'æ¸…æ´',
                'ä¸å·¥ä½œ', 'æ²¡ååº”', 'å¼‚å“', 'æ¼æ°´', 'ä¸åˆ¶å†·', 'ä¸åŠ æ¹¿',
                // è´­ä¹°ç›¸å…³
                'ä»·æ ¼', 'è´­ä¹°', 'è®¢å•', 'å‘è´§', 'ç‰©æµ', 'é€€è´§', 'æ¢è´§', 'é€€æ¬¾'
            ];

            const lowerMessage = message.toLowerCase();
            
            // æ£€æŸ¥æ˜¯å¦åŒ…å«DREOç›¸å…³å…³é”®è¯
            const hasDreoKeywords = dreoKeywords.some(keyword => 
                lowerMessage.includes(keyword.toLowerCase())
            );

            // æ’é™¤æ˜æ˜¾çš„éç›¸å…³é—®é¢˜
            const nonRelatedKeywords = [
                'å¤©æ°”', 'è‚¡ç¥¨', 'æ–°é—»',
                'è·¯çº¿', 'å¯¼èˆª', 'äº¤é€š', 'é¤å…', 'ç”µå½±', 'éŸ³ä¹', 'æ¸¸æˆ',
                'ç¿»è¯‘', 'è®¡ç®—', 'æ•°å­¦', 'å†å²', 'åœ°ç†', 'æ”¿æ²»', 'ä½“è‚²',
                'åƒé¥­', 'ç¡è§‰', 'å·¥ä½œ', 'å­¦ä¹ '
            ];

            const hasNonRelated = nonRelatedKeywords.some(keyword => 
                lowerMessage.includes(keyword.toLowerCase())
            );

            // å¦‚æœåŒ…å«éç›¸å…³å…³é”®è¯ä¸”ä¸åŒ…å«DREOå…³é”®è¯ï¼Œåˆ™è®¤ä¸ºä¸ç›¸å…³
            if (hasNonRelated && !hasDreoKeywords) {
                return false;
            }

            // å¦‚æœåŒ…å«DREOå…³é”®è¯æˆ–è€…æ˜¯å¸¸è§çš„å®¢æœé—®é¢˜ï¼Œåˆ™è®¤ä¸ºç›¸å…³
            return hasDreoKeywords || isCommonCustomerServiceQuestion(message);
        }

        // æ£€æµ‹æ˜¯å¦ä¸ºå¸¸è§å®¢æœé—®é¢˜ï¼ˆå³ä½¿æ²¡æœ‰æ˜ç¡®æåˆ°DREOï¼‰
        function isCommonCustomerServiceQuestion(message) {
            const commonServiceKeywords = [
                'æ€ä¹ˆ', 'å¦‚ä½•', 'å¯ä»¥', 'èƒ½å¦', 'æ˜¯å¦', 'ä¸ºä»€ä¹ˆ', 'ä»€ä¹ˆæ—¶å€™',
                'å¸®åŠ©', 'æ”¯æŒ', 'å’¨è¯¢', 'å»ºè®®', 'æ¨è', 'é€‰æ‹©',
                'é—®é¢˜', 'æ•…éšœ', 'ä¸è¡Œ', 'åäº†', 'å¼‚å¸¸'
            ];

            const lowerMessage = message.toLowerCase();
            return commonServiceKeywords.some(keyword => 
                lowerMessage.includes(keyword)
            );
        }

        // äº§å“å¯¹æ¯”æ•°æ®
        const productComparisonData = {
            'DR-HHM002S vs DR-HHM003S': {
                commonFeatures: 'ä¸¤æ¬¾äº§å“å‡ä¸ºDREOæ™ºèƒ½åŠ æ¹¿å™¨ï¼Œæ”¯æŒAPPè¿œç¨‹æ§åˆ¶ï¼Œå…·å¤‡è‡ªåŠ¨æ¹¿åº¦è°ƒèŠ‚åŠŸèƒ½ï¼Œéƒ½é‡‡ç”¨è¶…å£°æ³¢åŠ æ¹¿æŠ€æœ¯ï¼Œå™ªéŸ³ä½äº35dBï¼Œæ”¯æŒå®šæ—¶åŠŸèƒ½ã€‚',
                differences: [
                    { feature: 'åŠ æ¹¿å®¹é‡', 'DR-HHM002S': '300ml/h', 'DR-HHM003S': '500ml/h' },
                    { feature: 'æ°´ç®±å®¹é‡', 'DR-HHM002S': '4L', 'DR-HHM003S': '6L' },
                    { feature: 'é€‚ç”¨é¢ç§¯', 'DR-HHM002S': '30-40ã¡', 'DR-HHM003S': '50-60ã¡' },
                    { feature: 'åŠŸç‡', 'DR-HHM002S': '25W', 'DR-HHM003S': '35W' },
                    { feature: 'ä»·æ ¼åŒºé—´', 'DR-HHM002S': 'Â¥299-399', 'DR-HHM003S': 'Â¥399-499' },
                    { feature: 'æ˜¾ç¤ºå±', 'DR-HHM002S': 'LEDæ•°æ˜¾', 'DR-HHM003S': 'LCDå½©å±' },
                    { feature: 'é¦™è–°åŠŸèƒ½', 'DR-HHM002S': 'ä¸æ”¯æŒ', 'DR-HHM003S': 'æ”¯æŒ' }
                ],
                analysis: {
                    'DR-HHM002S': {
                        pros: ['ä»·æ ¼å®æƒ ï¼Œæ€§ä»·æ¯”é«˜', 'ä½“ç§¯å°å·§ï¼Œä¾¿äºæ‘†æ”¾', 'åŠŸè€—ä½ï¼ŒèŠ‚èƒ½ç¯ä¿', 'æ“ä½œç®€å•ï¼Œæ˜“äºä½¿ç”¨'],
                        cons: ['åŠ æ¹¿é‡ç›¸å¯¹è¾ƒå°', 'é€‚ç”¨é¢ç§¯æœ‰é™', 'ä¸æ”¯æŒé¦™è–°åŠŸèƒ½']
                    },
                    'DR-HHM003S': {
                        pros: ['åŠ æ¹¿é‡å¤§ï¼Œæ•ˆæœæ˜¾è‘—', 'é€‚ç”¨é¢ç§¯å¹¿', 'å½©è‰²LCDæ˜¾ç¤ºå±', 'æ”¯æŒé¦™è–°åŠŸèƒ½'],
                        cons: ['ä»·æ ¼ç›¸å¯¹è¾ƒé«˜', 'ä½“ç§¯è¾ƒå¤§', 'åŠŸè€—ç¨é«˜']
                    }
                },
                recommendation: 'å¦‚æœæ‚¨çš„æˆ¿é—´é¢ç§¯åœ¨30-40ã¡ï¼Œè¿½æ±‚æ€§ä»·æ¯”ï¼Œå»ºè®®é€‰æ‹©DR-HHM002Sï¼›å¦‚æœæˆ¿é—´é¢ç§¯è¾ƒå¤§ï¼ˆ50ã¡ä»¥ä¸Šï¼‰æˆ–è€…éœ€è¦é¦™è–°åŠŸèƒ½ï¼Œå»ºè®®é€‰æ‹©DR-HHM003Sã€‚'
            }
        };

        // æ·»åŠ äº§å“å¯¹æ¯”å›å¤
        function addProductComparisonResponse(userMessage) {
            // ç®€å•çš„äº§å“è¯†åˆ«é€»è¾‘ï¼Œå®é™…åº”ç”¨ä¸­å¯ä»¥æ›´å¤æ‚
            let comparisonKey = 'DR-HHM002S vs DR-HHM003S'; // é»˜è®¤å¯¹æ¯”
            
            if (userMessage.includes('DR-HHM002S') && userMessage.includes('DR-HHM003S')) {
                comparisonKey = 'DR-HHM002S vs DR-HHM003S';
            }
            
            const comparisonData = productComparisonData[comparisonKey];
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'AI';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            messageContent.style.lineHeight = '1.6';
            
            // æ ‡é¢˜
            const titleDiv = document.createElement('div');
            titleDiv.style.cssText = 'font-weight: bold; margin-bottom: 12px; color: #333; font-size: 14px;';
            titleDiv.textContent = `ğŸ“Š ${comparisonKey} è¯¦ç»†å¯¹æ¯”åˆ†æ`;
            messageContent.appendChild(titleDiv);
            
            // ç›¸åŒç‚¹æ€»ç»“
            const commonDiv = document.createElement('div');
            commonDiv.style.cssText = 'margin-bottom: 16px;';
            commonDiv.innerHTML = `
                <div style="font-size: 13px; color: #333;">${comparisonData.commonFeatures}</div>
            `;
            messageContent.appendChild(commonDiv);
            
            // å·®å¼‚å¯¹æ¯”è¡¨æ ¼
            const tableDiv = document.createElement('div');
            tableDiv.style.cssText = 'margin: 16px 0;';
            
            const tableTitle = document.createElement('div');
            tableTitle.style.cssText = 'font-weight: bold; color: #333; margin-bottom: 8px; font-size: 14px;';
            tableTitle.textContent = 'ğŸ“‹ è¯¦ç»†å·®å¼‚å¯¹æ¯”';
            tableDiv.appendChild(tableTitle);
            
            const table = document.createElement('table');
            table.className = 'comparison-table';
            
            // è¡¨å¤´
            const thead = document.createElement('thead');
            const headerRow = document.createElement('tr');
            headerRow.innerHTML = `
                <th>åŠŸèƒ½ç‰¹æ€§</th>
                <th>DR-HHM002S</th>
                <th>DR-HHM003S</th>
            `;
            thead.appendChild(headerRow);
            table.appendChild(thead);
            
            // è¡¨æ ¼å†…å®¹
            const tbody = document.createElement('tbody');
            comparisonData.differences.forEach(diff => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="feature-name">${diff.feature}</td>
                    <td>${diff['DR-HHM002S']}</td>
                    <td>${diff['DR-HHM003S']}</td>
                `;
                tbody.appendChild(row);
            });
            table.appendChild(tbody);
            
            tableDiv.appendChild(table);
            messageContent.appendChild(tableDiv);
            
            // // ä¼˜åŠ£åŠ¿åˆ†æ
            // const analysisDiv = document.createElement('div');
            // analysisDiv.style.cssText = 'margin: 16px 0;';
            
            // const analysisTitle = document.createElement('div');
            // analysisTitle.style.cssText = 'font-weight: bold; color: #333; margin-bottom: 12px; font-size: 14px;';
            // analysisTitle.textContent = 'âš–ï¸ ä¼˜åŠ£åŠ¿åˆ†æ';
            // analysisDiv.appendChild(analysisTitle);
            
            // // DR-HHM002S åˆ†æ
            // const analysis002S = document.createElement('div');
            // analysis002S.className = 'pros-cons-section';
            // analysis002S.innerHTML = `
            //     <div class="pros-cons-title">ğŸ”¹ DR-HHM002S</div>
            //     <div style="margin-bottom: 8px;">
            //         <strong style="color: #28a745;">âœ… ä¼˜åŠ¿ï¼š</strong>
            //         ${comparisonData.analysis['DR-HHM002S'].pros.map(pro => `<div class="pros-item">â€¢ ${pro}</div>`).join('')}
            //     </div>
            //     <div>
            //         <strong style="color: #dc3545;">âŒ åŠ£åŠ¿ï¼š</strong>
            //         ${comparisonData.analysis['DR-HHM002S'].cons.map(con => `<div class="cons-item">â€¢ ${con}</div>`).join('')}
            //     </div>
            // `;
            // analysisDiv.appendChild(analysis002S);
            
            // // DR-HHM003S åˆ†æ
            // const analysis003S = document.createElement('div');
            // analysis003S.className = 'pros-cons-section';
            // analysis003S.innerHTML = `
            //     <div class="pros-cons-title">ğŸ”¹ DR-HHM003S</div>
            //     <div style="margin-bottom: 8px;">
            //         <strong style="color: #28a745;">âœ… ä¼˜åŠ¿ï¼š</strong>
            //         ${comparisonData.analysis['DR-HHM003S'].pros.map(pro => `<div class="pros-item">â€¢ ${pro}</div>`).join('')}
            //     </div>
            //     <div>
            //         <strong style="color: #dc3545;">âŒ åŠ£åŠ¿ï¼š</strong>
            //         ${comparisonData.analysis['DR-HHM003S'].cons.map(con => `<div class="cons-item">â€¢ ${con}</div>`).join('')}
            //     </div>
            // `;
            // analysisDiv.appendChild(analysis003S);
            
            // messageContent.appendChild(analysisDiv);
            
            // è´­ä¹°å»ºè®®
            const recommendationDiv = document.createElement('div');
            recommendationDiv.style.cssText = 'margin-top: 16px; padding: 12px; background: #fff3cd; border-radius: 8px; border-left: 4px solid #ffc107;';
            recommendationDiv.innerHTML = `
                <div style="font-weight: bold; color: #856404; margin-bottom: 6px;">ğŸ’¡ è´­ä¹°å»ºè®®</div>
                <div style="font-size: 13px; color: #856404;">${comparisonData.recommendation}</div>
            `;
            messageContent.appendChild(recommendationDiv);
            
            // æ·»åŠ åé¦ˆæŒ‰é’®
            const messageId = `msg-${++feedbackCounter}`;
            const feedbackButtons = createFeedbackButtons(messageId);
            messageContent.appendChild(feedbackButtons);
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // æ·»åŠ éDREOç›¸å…³é—®é¢˜çš„å›å¤
        function addNonDreoResponse(userMessage) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'AI';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            messageContent.style.lineHeight = '1.6';
            
            // åˆ›å»ºå›å¤å†…å®¹
            const responseDiv = document.createElement('div');
            responseDiv.style.cssText = 'padding: 12px; background: #fff8e1; border-radius: 8px; border-left: 4px solid #ff9800;';
            responseDiv.innerHTML = `
                <div style="color: #333; font-size: 14px; line-height: 1.5;">
                    å¾ˆæŠ±æ­‰ï¼Œæ‚¨æå‡ºçš„é—®é¢˜è¶…å‡ºäº†æˆ‘ç›®å‰çš„çŸ¥è¯†èŒƒå›´ã€‚æˆ‘æ— æ³•ä¸ºæ‚¨æä¾›å‡†ç¡®çš„è§£ç­”ã€‚
                    <br><br>
                    <div>
                        
                        <div style="color: #333; font-size: 14px; margin-bottom: 14px;">
                            ä¸ºäº†è§£å†³æ‚¨çš„é—®é¢˜ï¼Œå»ºè®®æ‚¨è”ç³»ä¸“ä¸šçš„æŠ€æœ¯æ”¯æŒå›¢é˜Ÿã€‚
                        </div>

                        <div style="text-align: center; margin: 16px 0;">
                            <button onclick="window.open('https://support.dreo.com/en/support/request', '_blank')" 
                                    style="background: linear-gradient(135deg, #e67e22 0%, #d35400 100%); 
                                           color: white; 
                                           border: none; 
                                           padding: 14px 28px; 
                                           border-radius: 25px; 
                                           font-size: 16px; 
                                           font-weight: bold; 
                                           cursor: pointer; 
                                           transition: all 0.3s ease;
                                           box-shadow: 0 4px 15px rgba(230, 126, 34, 0.3);
                                           display: flex;
                                           align-items: center;
                                           justify-content: center;
                                           margin: 0 auto;"
                                    onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(230, 126, 34, 0.4)'"
                                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(230, 126, 34, 0.3)'">
                                <span style="margin-right: 6px;">ğŸ“</span>
                                æäº¤æŠ€æœ¯æ”¯æŒå·¥å•
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            messageContent.appendChild(responseDiv);
            
            // æ·»åŠ åé¦ˆæŒ‰é’®
            const messageId = `msg-${++feedbackCounter}`;
            const feedbackButtons = createFeedbackButtons(messageId);
            messageContent.appendChild(feedbackButtons);
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // æ·»åŠ é—®å¥½å›å¤
        function addGreetingResponse() {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'AI';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            messageContent.style.lineHeight = '1.6';
            
            // åˆ›å»ºé—®å¥½å›å¤å†…å®¹
            const greetingDiv = document.createElement('div');
            greetingDiv.innerHTML = `
                <div style="display: flex; align-items: center; margin-bottom: 12px;">
                    <span style="font-size: 24px; margin-right: 8px;">ğŸ‘‹</span>
                    <strong style="color: #667eea; font-size: 16px;">æ‚¨å¥½ï¼å¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡ï¼</strong>
                </div>
                
                <div>
                    <p style="color: #333; font-size: 14px; margin-bottom: 12px;">
                        ğŸ¤– æˆ‘æ˜¯DREOæ™ºèƒ½åŠ©æ‰‹ï¼Œä¸“ä¸ºDREOæ™ºèƒ½å®¶ç”µç”¨æˆ·æä¾›7Ã—24å°æ—¶ä¸“ä¸šæœåŠ¡ï¼Œè‡´åŠ›äºè®©æ‚¨çš„æ™ºèƒ½ç”Ÿæ´»æ›´åŠ ä¾¿æ·èˆ’é€‚ã€‚
                    </p>
                </div>

                <div style="background: #f8f9fa; padding: 14px; border-radius: 10px; margin: 12px 0;">
                    <div style="font-weight: bold; color: #333; margin-bottom: 8px; display: flex; align-items: center;">
                        <span style="margin-right: 6px;">ğŸ¯</span>æˆ‘å¯ä»¥ä¸ºæ‚¨æä¾›ï¼š
                    </div>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; font-size: 13px;">
                        <div style="display: flex; align-items: center; color: #555;">
                            <span style="color: #28a745; margin-right: 4px;">âœ“</span>äº§å“å’¨è¯¢ä¸å¯¹æ¯”
                        </div>
                        <div style="display: flex; align-items: center; color: #555;">
                            <span style="color: #28a745; margin-right: 4px;">âœ“</span>æ•…éšœè¯Šæ–­è§£å†³
                        </div>
                        <div style="display: flex; align-items: center; color: #555;">
                            <span style="color: #28a745; margin-right: 4px;">âœ“</span>ä½¿ç”¨æŒ‡å¯¼å¸®åŠ©
                        </div>
                        <div style="display: flex; align-items: center; color: #555;">
                            <span style="color: #28a745; margin-right: 4px;">âœ“</span>å”®åæœåŠ¡æ”¯æŒ
                        </div>
                    </div>
                </div>

                <div>
                    <p style="color: #333; font-size: 14px; margin-bottom: 12px;">
                        ğŸ’¬ è¯·å‘Šè¯‰æˆ‘æ‚¨éœ€è¦ä»€ä¹ˆå¸®åŠ©
                    </p>
                </div>
            `;
            
            messageContent.appendChild(greetingDiv);
            
            // æ·»åŠ åé¦ˆæŒ‰é’®
            const messageId = `msg-${++feedbackCounter}`;
            const feedbackButtons = createFeedbackButtons(messageId);
            messageContent.appendChild(feedbackButtons);
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // DREOäº§å“æ¨èæ•°æ®
        const dreoProductRecommendations = {
            'åŠ æ¹¿å™¨': {
                category: 'åŠ æ¹¿å™¨',
                description: 'DREOåŠ æ¹¿å™¨é‡‡ç”¨è¶…å£°æ³¢é›¾åŒ–æŠ€æœ¯ï¼Œé™éŸ³è¿è¡Œï¼Œæ™ºèƒ½æ§åˆ¶æ¹¿åº¦ï¼Œä¸ºæ‚¨æ‰“é€ èˆ’é€‚å¥åº·çš„å®¤å†…ç¯å¢ƒã€‚',
                products: [
                    {
                        model: 'DR-HHM003S',
                        name: 'æ™ºèƒ½åŠ æ¹¿å™¨ (å¤§å®¹é‡ç‰ˆ)',
                        features: ['6Lå¤§å®¹é‡æ°´ç®±', '500ml/håŠ æ¹¿é‡', '50-60ã¡é€‚ç”¨', 'LCDå½©å±æ˜¾ç¤º', 'æ”¯æŒé¦™è–°åŠŸèƒ½'],
                        price: 'Â¥399-499'
                    },
                    {
                        model: 'DR-HHM002S', 
                        name: 'æ™ºèƒ½åŠ æ¹¿å™¨ (ç»æµç‰ˆ)',
                        features: ['4Læ°´ç®±å®¹é‡', '300ml/håŠ æ¹¿é‡', '30-40ã¡é€‚ç”¨', 'LEDæ•°æ˜¾', 'è¶…é™éŸ³è®¾è®¡'],
                        price: 'Â¥299-399'
                    }
                ]
            },
            'é£æ‰‡': {
                category: 'å¡”æ‰‡/é£æ‰‡',
                description: 'DREOå¡”æ‰‡æ­è½½å…ˆè¿›ç©ºæ°”åŠ¨åŠ›å­¦è®¾è®¡ï¼Œæä¾›å¼ºåŠ²è€Œå®‰é™çš„é£åŠ›ï¼Œæ™ºèƒ½æ§åˆ¶è®©æ‚¨äº«å—ä¸ªæ€§åŒ–çš„æ¸…å‡‰ä½“éªŒã€‚',
                products: [
                    {
                        model: 'Nomad One',
                        name: 'æ™ºèƒ½å¡”æ‰‡',
                        features: ['108æ¡£é£é€Ÿè°ƒèŠ‚', 'è¶…é™éŸ³è¿è¡Œ', 'APPè¿œç¨‹æ§åˆ¶', 'å®šæ—¶é¢„çº¦åŠŸèƒ½', 'è‡ªç„¶é£æ¨¡æ‹Ÿ'],
                        price: 'Â¥699-899'
                    }
                ]
            },
            'å¡”æ‰‡': {
                category: 'å¡”æ‰‡/é£æ‰‡', 
                description: 'DREOå¡”æ‰‡æ­è½½å…ˆè¿›ç©ºæ°”åŠ¨åŠ›å­¦è®¾è®¡ï¼Œæä¾›å¼ºåŠ²è€Œå®‰é™çš„é£åŠ›ï¼Œæ™ºèƒ½æ§åˆ¶è®©æ‚¨äº«å—ä¸ªæ€§åŒ–çš„æ¸…å‡‰ä½“éªŒã€‚',
                products: [
                    {
                        model: 'Nomad One',
                        name: 'æ™ºèƒ½å¡”æ‰‡',
                        features: ['108æ¡£é£é€Ÿè°ƒèŠ‚', 'è¶…é™éŸ³è¿è¡Œ', 'APPè¿œç¨‹æ§åˆ¶', 'å®šæ—¶é¢„çº¦åŠŸèƒ½', 'è‡ªç„¶é£æ¨¡æ‹Ÿ'],
                        price: 'Â¥699-899'
                    }
                ]
            },
            'ç©ºæ°”å‡€åŒ–å™¨': {
                category: 'ç©ºæ°”å‡€åŒ–å™¨',
                description: 'DREOä¸“æ³¨äºç©ºæ°”è´¨é‡æ”¹å–„ï¼Œæˆ‘ä»¬çš„äº§å“ä¸»è¦é›†ä¸­åœ¨ç©ºæ°”æµåŠ¨å’Œæ¹¿åº¦è°ƒèŠ‚é¢†åŸŸï¼Œä¸ºæ‚¨æ¨èæˆ‘ä»¬çš„ç©ºæ°”å¾ªç¯å’Œå‡€åŒ–è§£å†³æ–¹æ¡ˆã€‚',
                products: [
                    {
                        model: 'Nomad Oneå¡”æ‰‡',
                        name: 'æ™ºèƒ½ç©ºæ°”å¾ªç¯æ‰‡',
                        features: ['å¼ºåŠ›ç©ºæ°”å¾ªç¯', 'å‡€åŒ–ç©ºæ°”æµåŠ¨', 'é™¤æ¹¿é…åˆä½¿ç”¨', 'æ™ºèƒ½é£é€Ÿæ§åˆ¶'],
                        price: 'Â¥699-899'
                    }
                ]
            }
        };

        // äº§å“æ¨èæ•°æ®åº“
        const productRecommendationDatabase = {
            recommendations: [
                {
                    id: 'dr-hhm003s',
                    model: 'DR-HHM003S',
                    name: 'æ™ºèƒ½åŠ æ¹¿å™¨ (å¤§å®¹é‡ç‰ˆ)',
                    category: 'åŠ æ¹¿å™¨',
                    price: 'Â¥399-499',
                    image: 'ğŸ ',
                    link: 'https://support.dreo.com/en', // å®é™…äº§å“é¡µé¢é“¾æ¥
                    features: ['6Lå¤§å®¹é‡æ°´ç®±', '500ml/håŠ æ¹¿é‡', '50-60ã¡é€‚ç”¨', 'LCDå½©å±æ˜¾ç¤º', 'æ”¯æŒé¦™è–°åŠŸèƒ½', 'APPæ™ºèƒ½æ§åˆ¶'],
                    suitableFor: ['å¤§æˆ¿é—´', 'å®¢å…', 'åŠå…¬å®¤', 'å©´å„¿æˆ¿'],
                    highlights: ['å¤§å®¹é‡', 'é«˜æ•ˆåŠ æ¹¿', 'æ™ºèƒ½æ§åˆ¶'],
                    reasonTemplate: 'é€‚åˆå¤§ç©ºé—´ä½¿ç”¨ï¼Œ6Lå¤§å®¹é‡å‡å°‘é¢‘ç¹åŠ æ°´ï¼ŒLCDå½©å±æ“ä½œç®€ä¾¿'
                },
                {
                    id: 'dr-hhm002s',
                    model: 'DR-HHM002S', 
                    name: 'æ™ºèƒ½åŠ æ¹¿å™¨ (ç»æµç‰ˆ)',
                    category: 'åŠ æ¹¿å™¨',
                    price: 'Â¥299-399',
                    image: 'ğŸ¡',
                    link: 'https://support.dreo.com/en',
                    features: ['4Læ°´ç®±å®¹é‡', '300ml/håŠ æ¹¿é‡', '30-40ã¡é€‚ç”¨', 'LEDæ•°æ˜¾', 'è¶…é™éŸ³è®¾è®¡', 'èŠ‚èƒ½çœç”µ'],
                    suitableFor: ['å§å®¤', 'ä¹¦æˆ¿', 'å°æˆ·å‹', 'å•äººæˆ¿'],
                    highlights: ['æ€§ä»·æ¯”é«˜', 'é™éŸ³è¿è¡Œ', 'èŠ‚èƒ½ç¯ä¿'],
                    reasonTemplate: 'æ€§ä»·æ¯”ä¹‹é€‰ï¼Œé€‚åˆä¸­å°å‹æˆ¿é—´ï¼Œè¶…é™éŸ³è®¾è®¡ä¸å½±å“ç¡çœ '
                },
                {
                    id: 'nomad-one',
                    model: 'Nomad One',
                    name: 'æ™ºèƒ½å¡”æ‰‡',
                    category: 'é£æ‰‡',
                    price: 'Â¥699-899',
                    image: 'ğŸŒªï¸',
                    link: 'https://support.dreo.com/en',
                    features: ['108æ¡£é£é€Ÿè°ƒèŠ‚', 'è¶…é™éŸ³è¿è¡Œ', 'APPè¿œç¨‹æ§åˆ¶', 'å®šæ—¶é¢„çº¦åŠŸèƒ½', 'è‡ªç„¶é£æ¨¡æ‹Ÿ', 'ç©ºæ°”å¾ªç¯'],
                    suitableFor: ['å®¢å…', 'å§å®¤', 'åŠå…¬å®¤', 'å…¨å±‹'],
                    highlights: ['ç²¾ç»†è°ƒæ§', 'æ™ºèƒ½äº’è”', 'èŠ‚èƒ½é™å™ª'],
                    reasonTemplate: '108æ¡£ç²¾ç»†é£é€Ÿè°ƒèŠ‚ï¼Œæ™ºèƒ½åŒ–ç¨‹åº¦é«˜ï¼Œé€‚åˆè¿½æ±‚ä¸ªæ€§åŒ–ä½“éªŒçš„ç”¨æˆ·'
                }
            ],
            
            // æ ¹æ®ç”¨æˆ·éœ€æ±‚æ™ºèƒ½æ¨èäº§å“
            getRecommendations: function(userMessage) {
                const message = userMessage.toLowerCase();
                let recommendations = [];
                
                // åŸºäºä½¿ç”¨åœºæ™¯æ¨è
                if (message.includes('å§å®¤') || message.includes('ç¡è§‰') || message.includes('å®‰é™') || message.includes('é™éŸ³')) {
                    recommendations.push(this.recommendations[1], this.recommendations[2]); // DR-HHM002S, Nomad One
                } else if (message.includes('å®¢å…') || message.includes('å¤§æˆ¿é—´') || message.includes('åŠå…¬å®¤')) {
                    recommendations.push(this.recommendations[0], this.recommendations[2]); // DR-HHM003S, Nomad One
                } else if (message.includes('å©´å„¿') || message.includes('å°å­©') || message.includes('å­•å¦‡')) {
                    recommendations.push(this.recommendations[1], this.recommendations[0]); // é™éŸ³ä¼˜å…ˆ
                } else if (message.includes('æ€§ä»·æ¯”') || message.includes('ä¾¿å®œ') || message.includes('ç»æµ')) {
                    recommendations.push(this.recommendations[1], this.recommendations[0]); // æ€§ä»·æ¯”ä¼˜å…ˆ
                }
                
                // åŸºäºäº§å“ç±»å‹æ¨è
                if (message.includes('åŠ æ¹¿å™¨') || message.includes('å¹²ç‡¥') || message.includes('æ¹¿åº¦')) {
                    if (!recommendations.some(r => r.category === 'åŠ æ¹¿å™¨')) {
                        recommendations.unshift(this.recommendations[0], this.recommendations[1]);
                    }
                } else if (message.includes('é£æ‰‡') || message.includes('å¡”æ‰‡') || message.includes('é™æ¸©') || message.includes('å‡‰å¿«')) {
                    if (!recommendations.some(r => r.category === 'é£æ‰‡')) {
                        recommendations.unshift(this.recommendations[2]);
                    }
                }
                
                // é»˜è®¤æ¨èï¼ˆå¦‚æœæ²¡æœ‰ç‰¹å®šåŒ¹é…ï¼‰
                if (recommendations.length === 0) {
                    recommendations = [this.recommendations[0], this.recommendations[1], this.recommendations[2]];
                }
                
                // é™åˆ¶æœ€å¤š3ä¸ªæ¨è
                return recommendations.slice(0, 3);
            }
        };

        // æ·»åŠ äº§å“æ¨èå›å¤
        function addProductRecommendationResponse(userMessage) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'AI';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            messageContent.style.lineHeight = '1.6';
            
            // æ ‡é¢˜
            const titleDiv = document.createElement('div');
            titleDiv.style.cssText = 'font-weight: bold; margin-bottom: 12px; color: #333; font-size: 16px; display: flex; align-items: center;';
            titleDiv.innerHTML = `
                <span style="font-size: 20px; margin-right: 8px;">ğŸ¯</span>
                ä¸ºæ‚¨ç²¾é€‰DREOäº§å“æ¨è
            `;
            messageContent.appendChild(titleDiv);

            // è·å–æ¨èäº§å“
            const recommendedProducts = productRecommendationDatabase.getRecommendations(userMessage);
            
            // æ¨èç†ç”±è¯´æ˜
            const reasonDiv = document.createElement('div');
            reasonDiv.className = 'recommendation-reason';
            reasonDiv.innerHTML = `
                <div style="color: #333; font-size: 13px;">
                    åŸºäºæ‚¨çš„éœ€æ±‚ï¼Œæˆ‘ä¸ºæ‚¨æ¨èä»¥ä¸‹${recommendedProducts.length}æ¬¾DREOäº§å“ï¼Œæ¯æ¬¾éƒ½æœ‰å…¶ç‹¬ç‰¹ä¼˜åŠ¿ï¼š
                </div>
            `;
            messageContent.appendChild(reasonDiv);

            // äº§å“å¡ç‰‡
            recommendedProducts.forEach((product, index) => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.onclick = () => {
                    window.open(product.link, '_blank');
                };

                productCard.innerHTML = `
                    <div class="card-overlay">ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…</div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; margin-bottom: 6px;">
                                <span style="font-size: 24px; margin-right: 8px;">${product.image}</span>
                                <div>
                                    <div style="font-weight: bold; color: #333; font-size: 16px;">${product.model}</div>
                                    <div style="color: #666; font-size: 13px;">${product.name}</div>
                                </div>
                            </div>
                            
                            <div style="margin: 8px 0;">
                                ${product.highlights.map(highlight => 
                                    `<span class="product-badge">${highlight}</span>`
                                ).join('')}
                            </div>
                        </div>
                        
                        <div style="text-align: right;">
                            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 6px 12px; border-radius: 6px; font-size: 14px; font-weight: bold; margin-bottom: 6px;">
                                ${product.price}
                            </div>
                            <div style="color: #28a745; font-size: 12px; font-weight: bold;">
                                ğŸ”¥ ç¬¬${index + 1}æ¨è
                            </div>
                        </div>
                    </div>

                    <div style="background: #f8f9fa; padding: 10px; border-radius: 6px; margin: 10px 0;">
                        <div style="font-size: 12px; color: #333;">
                            ${product.reasonTemplate}
                        </div>
                    </div>

                    <div style="margin-top: 10px;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 4px;">
                            ${product.features.map(feature => 
                                `<div style="font-size: 11px; color: #555; display: flex; align-items: center;">
                                    <span style="color: #28a745; margin-right: 4px;">â—</span>${feature}
                                </div>`
                            ).join('')}
                        </div>
                    </div>

                `;

                messageContent.appendChild(productCard);
            });

            // å’¨è¯¢æç¤º
            const consultDiv = document.createElement('div');
            consultDiv.style.cssText = 'padding: 12px; margin-top: 16px;';
            consultDiv.innerHTML = `
                <div style="font-size: 14px;">
                    ğŸ’¬ å¦‚éœ€äº†è§£æ›´å¤šäº§å“è¯¦æƒ…ã€ä½¿ç”¨æŒ‡å¯¼æˆ–æœ‰å…¶ä»–ç–‘é—®ï¼Œéšæ—¶å’¨è¯¢æˆ‘ï¼
                </div>
            `;
            messageContent.appendChild(consultDiv);

            // æ·»åŠ åé¦ˆæŒ‰é’®
            const messageId = `msg-${++feedbackCounter}`;
            const feedbackButtons = createFeedbackButtons(messageId);
            messageContent.appendChild(feedbackButtons);

            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // æ·»åŠ æ”¹è¿›å»ºè®®å›å¤
        function addImprovementSuggestionResponse(userMessage) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'AI';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            messageContent.style.lineHeight = '1.6';
            
            // æå–å»ºè®®çš„æ ¸å¿ƒå†…å®¹ï¼ˆç®€å•çš„å…³é”®è¯æå–ï¼‰
            const suggestionSummary = extractSuggestionSummary(userMessage);
            
            const responseDiv = document.createElement('div');
            responseDiv.innerHTML = `
                <div style="background: linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%); padding: 18px; border-radius: 12px; border-left: 4px solid #4caf50;">
                    <div style="display: flex; align-items: center; margin-bottom: 14px;">
                        <span style="font-size: 24px; margin-right: 10px;">ğŸ’¡</span>
                        <strong style="color: #2e7d32; font-size: 18px;">éå¸¸æ„Ÿè°¢æ‚¨çš„å®è´µå»ºè®®ï¼</strong>
                    </div>
                    
                    <div style="color: #388e3c; font-size: 14px; margin-bottom: 16px; line-height: 1.6;">
                        æ‚¨æå‡ºçš„"<em style="color: #1b5e20; font-weight: bold;">${suggestionSummary}</em>"å»ºè®®éå¸¸æœ‰ä»·å€¼ï¼
                        è¿™æ­£æ˜¯æˆ‘ä»¬æŒç»­æ”¹è¿›äº§å“å’ŒæœåŠ¡æ‰€éœ€è¦çš„çœŸå®ç”¨æˆ·åé¦ˆã€‚
                    </div>

                    <div style="margin: 16px 0;">
                        <div style="display: grid; gap: 10px;">
                            <div style="display: flex; align-items: center; color: #388e3c; font-size: 13px;">
                                <span style="background: #4caf50; color: white; border-radius: 50%; width: 18px; height: 18px; display: flex; align-items: center; justify-content: center; font-size: 10px; margin-right: 8px;">1</span>
                                æˆ‘ä»¬å·²æ”¶å½•æ‚¨çš„å»ºè®®åˆ°äº§å“æ”¹è¿›æ•°æ®åº“
                            </div>
                            <div style="display: flex; align-items: center; color: #388e3c; font-size: 13px;">
                                <span style="background: #4caf50; color: white; border-radius: 50%; width: 18px; height: 18px; display: flex; align-items: center; justify-content: center; font-size: 10px; margin-right: 8px;">2</span>
                                ç›¸å…³äº§å“å›¢é˜Ÿå°†è¿›è¡Œä¸“ä¸šè¯„ä¼°åˆ†æ
                            </div>
                            <div style="display: flex; align-items: center; color: #388e3c; font-size: 13px;">
                                <span style="background: #4caf50; color: white; border-radius: 50%; width: 18px; height: 18px; display: flex; align-items: center; justify-content: center; font-size: 10px; margin-right: 8px;">3</span>
                                å¯è¡Œå»ºè®®å°†çº³å…¥äº§å“è¿­ä»£å¼€å‘è®¡åˆ’
                            </div>
                            <div style="display: flex; align-items: center; color: #388e3c; font-size: 13px;">
                                <span style="background: #4caf50; color: white; border-radius: 50%; width: 18px; height: 18px; display: flex; align-items: center; justify-content: center; font-size: 10px; margin-right: 8px;">4</span>
                                æˆ‘ä»¬ä¼šé€šè¿‡å¤šæ¸ é“é€šçŸ¥æ”¹è¿›è¿›å±•
                            </div>
                        </div>
                    </div>

                    <div style="background: linear-gradient(135deg, #fff3e0 0%, #fffbf0 100%); border: 2px solid #ff9800; border-radius: 12px; padding: 16px; margin: 16px 0;">
                        <div style="color: #bf360c; font-size: 14px; margin-bottom: 14px;">
                            DREOè¯šé‚€æ‚¨åŠ å…¥å…±åˆ›è®¡åˆ’ï¼Œæˆä¸ºäº§å“å…±åˆ›ä¼™ä¼´ï¼Œä¸æˆ‘ä»¬ä¸€èµ·æ‰“é€ æ›´å®Œç¾çš„æ™ºèƒ½å®¶å±…ä½“éªŒï¼
                        </div>

                        <div style="text-align: center;">
                            <button onclick="window.open('https://account.dreo.com/en/cocreator-program', '_blank')" 
                                    style="background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%); 
                                           color: white; 
                                           border: none; 
                                           padding: 12px 24px; 
                                           border-radius: 25px; 
                                           font-size: 14px; 
                                           font-weight: bold; 
                                           cursor: pointer; 
                                           transition: all 0.3s ease;
                                           box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3);"
                                    onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(255, 152, 0, 0.4)'"
                                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(255, 152, 0, 0.3)'">
                                ğŸ¯ ç«‹å³åŠ å…¥å…±åˆ›è®¡åˆ’
                            </button>
                        </div>
                        
                        <div style="text-align: center; margin-top: 16px; color: #bf360c; font-size: 11px;">
                            ä¼˜å…ˆä½“éªŒæ–°åŠŸèƒ½ï¼Œè·å¾—ä¸“å±æƒç›Š
                        </div>
                    </div>

                </div>
            `;
            
            messageContent.appendChild(responseDiv);
            
            // æ·»åŠ åé¦ˆæŒ‰é’®
            const messageId = `msg-${++feedbackCounter}`;
            const feedbackButtons = createFeedbackButtons(messageId);
            messageContent.appendChild(feedbackButtons);
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // æ·»åŠ æœªæ‰¾åˆ°å¯¹åº”è§£å†³æ–¹æ¡ˆçš„å›å¤
        function addNoSolutionFoundResponse(userMessage) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'AI';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            messageContent.style.lineHeight = '1.6';
            
            const responseDiv = document.createElement('div');
            responseDiv.innerHTML = `
                <div style="background: linear-gradient(135deg, #fff3e0 0%, #ffeaa7 100%); padding: 18px; border-radius: 12px; border-left: 4px solid #f39c12;">
                    <div style="color: #333; font-size: 14px; margin-bottom: 16px; line-height: 1.6;">
                        å¾ˆæŠ±æ­‰ï¼Œæ‚¨æå‡ºçš„é—®é¢˜è¶…å‡ºäº†æˆ‘ç›®å‰çš„çŸ¥è¯†èŒƒå›´ã€‚æˆ‘æ— æ³•ä¸ºæ‚¨æä¾›å‡†ç¡®çš„è§£ç­”ã€‚
                    </div>

                    <div style="margin: 16px 0;">
                        
                        <div style="color: #333; font-size: 14px; margin-bottom: 14px;">
                            ä¸ºäº†è§£å†³æ‚¨çš„é—®é¢˜ï¼Œå»ºè®®æ‚¨è”ç³»ä¸“ä¸šçš„æŠ€æœ¯æ”¯æŒå›¢é˜Ÿã€‚
                        </div>

                        <div style="text-align: center; margin: 16px 0;">
                            <button onclick="window.open('https://support.dreo.com/en/support/request', '_blank')" 
                                    style="background: linear-gradient(135deg, #e67e22 0%, #d35400 100%); 
                                           color: white; 
                                           border: none; 
                                           padding: 14px 28px; 
                                           border-radius: 25px; 
                                           font-size: 16px; 
                                           font-weight: bold; 
                                           cursor: pointer; 
                                           transition: all 0.3s ease;
                                           box-shadow: 0 4px 15px rgba(230, 126, 34, 0.3);
                                           display: flex;
                                           align-items: center;
                                           justify-content: center;
                                           margin: 0 auto;"
                                    onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(230, 126, 34, 0.4)'"
                                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(230, 126, 34, 0.3)'">
                                <span style="margin-right: 6px;">ğŸ“</span>
                                æäº¤æŠ€æœ¯æ”¯æŒå·¥å•
                            </button>
                        </div>
                    </div>

                </div>
            `;
            
            messageContent.appendChild(responseDiv);
            
            // æ·»åŠ åé¦ˆæŒ‰é’®
            const messageId = `msg-${++feedbackCounter}`;
            const feedbackButtons = createFeedbackButtons(messageId);
            messageContent.appendChild(feedbackButtons);
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // æå–å»ºè®®æ ¸å¿ƒå†…å®¹çš„ç®€å•å‡½æ•°
        function extractSuggestionSummary(message) {
            // å»é™¤å¸¸è§çš„å¡«å……è¯ï¼Œæå–å…³é”®å†…å®¹
            let summary = message
                .replace(/^(æˆ‘è§‰å¾—|æˆ‘è®¤ä¸º|æˆ‘å»ºè®®|å»ºè®®|å¸Œæœ›|æœŸæœ›|èƒ½å¦|å¯å¦|å¯ä»¥|åº”è¯¥|æœ€å¥½)/g, '')
                .replace(/(ä½ ä»¬|å’±ä»¬|DREO|dreo)/g, '')
                .trim();
            
            // å¦‚æœå¤„ç†åçš„å†…å®¹å¤ªçŸ­ï¼Œè¿”å›åŸæ¶ˆæ¯çš„å‰éƒ¨åˆ†
            if (summary.length < 10) {
                summary = message.length > 50 ? message.substring(0, 47) + '...' : message;
            } else if (summary.length > 50) {
                summary = summary.substring(0, 47) + '...';
            }
            
            return summary;
        }

        // æ·»åŠ ç”¨æˆ·ä¸æ»¡å›å¤
        function addDissatisfiedResponse(userMessage) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'AI';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            messageContent.style.lineHeight = '1.6';
            
            const responseDiv = document.createElement('div');
            responseDiv.innerHTML = `
                <div style="background: linear-gradient(135deg, #fdeaea 0%, #fff5f5 100%); padding: 18px; border-radius: 12px; border-left: 4px solid #dc3545;">
                    <div style="display: flex; align-items: center; margin-bottom: 16px;">
                        <span style="font-size: 24px; margin-right: 10px;">ğŸ˜”</span>
                        <strong style="color: #721c24; font-size: 18px;">éå¸¸æŠ±æ­‰ï¼Œè®©æ‚¨å¤±æœ›äº†</strong>
                    </div>
                    
                    <div style="color: #842029; font-size: 14px; margin-bottom: 16px; line-height: 1.6;">
                        æˆ‘æ·±æ·±ç†è§£æ‚¨æ­¤åˆ»çš„æ„Ÿå—ï¼Œä¹Ÿä¸ºæ²¡èƒ½æä¾›è®©æ‚¨æ»¡æ„çš„æœåŠ¡è€Œæ„Ÿåˆ°éå¸¸æŠ±æ­‰ã€‚
                        æ‚¨çš„ä¸æ»¡å®Œå…¨å¯ä»¥ç†è§£ï¼Œè¿™ç¡®å®æ˜¯æˆ‘ä»¬æœåŠ¡ä¸­çš„ä¸è¶³ã€‚
                    </div>

                    <div style="background: white; padding: 16px; border-radius: 10px; margin: 16px 0; box-shadow: 0 2px 8px rgba(220, 53, 69, 0.1);">
                        <div style="color: #333; font-size: 14px; margin-bottom: 16px;">
                            æ‚¨å¯èƒ½éœ€è¦æ›´ä¸“ä¸šçš„äººå·¥æœåŠ¡æ”¯æŒã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å¾—äººå·¥å®¢æœå¸®åŠ©:
                        </div>

                        <div style="text-align: center; margin: 16px 0;">
                            <button onclick="window.open('https://support.dreo.com/en/support/request', '_blank')" 
                                    style="background: linear-gradient(135deg, #dc3545 0%, #b02a37 100%); 
                                           color: white; 
                                           border: none; 
                                           padding: 16px 32px; 
                                           border-radius: 25px; 
                                           font-size: 16px; 
                                           font-weight: bold; 
                                           cursor: pointer; 
                                           transition: all 0.3s ease;
                                           box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);
                                           display: flex;
                                           align-items: center;
                                           justify-content: center;
                                           margin: 0 auto;"
                                    onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(220, 53, 69, 0.4)'"
                                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(220, 53, 69, 0.3)'">
                                <span style="margin-right: 8px;">ğŸ‘¨â€ğŸ’¼</span>
                                è”ç³»ä¸“ä¸šäººå·¥å®¢æœ
                            </button>
                        </div>
                    </div>

                    <div style="color: #842029; font-size: 14px; margin-bottom: 16px; line-height: 1.6;">
                        <div style="color: #842029; font-size: 13px; line-height: 1.5;">
                            æ‚¨çš„æ¯ä¸€æ¡åé¦ˆéƒ½æ˜¯æˆ‘ä»¬æ”¹è¿›çš„å®è´µè´¢å¯Œã€‚æˆ‘ä»¬ä¼šè®¤çœŸåˆ†ææœåŠ¡ä¸­çš„ä¸è¶³ï¼Œ
                            æŒç»­ä¼˜åŒ–AIåŠ©æ‰‹çš„èƒ½åŠ›ï¼ŒåŠªåŠ›ä¸ºæ¯ä½ç”¨æˆ·æä¾›æ›´å¥½çš„æœåŠ¡ä½“éªŒã€‚
                        </div>
                    </div>
                </div>
            `;
            
            messageContent.appendChild(responseDiv);
            
            // æ·»åŠ åé¦ˆæŒ‰é’®
            const messageId = `msg-${++feedbackCounter}`;
            const feedbackButtons = createFeedbackButtons(messageId);
            messageContent.appendChild(feedbackButtons);
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // æ·»åŠ æ„Ÿè°¢å›å¤ï¼ˆé—®é¢˜å·²è§£å†³ï¼‰
        function addThankfulResponse(userMessage) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'AI';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            messageContent.style.lineHeight = '1.6';
            
            const responseDiv = document.createElement('div');
            responseDiv.innerHTML = `
                <div style="background: linear-gradient(135deg, #e8f5e8 0%, #f0fff4 100%); padding: 18px; border-radius: 12px; border-left: 4px solid #28a745;">
                    <div style="display: flex; align-items: center; margin-bottom: 14px;">
                        <span style="font-size: 24px; margin-right: 10px;">ğŸ‰</span>
                        <strong style="color: #155724; font-size: 18px;">å¤ªæ£’äº†ï¼å¾ˆé«˜å…´èƒ½å¸®åˆ°æ‚¨</strong>
                    </div>
                    
                    <div style="color: #1e5a26; font-size: 14px; margin-bottom: 16px; line-height: 1.6;">
                        çœ‹åˆ°æ‚¨çš„é—®é¢˜å¾—åˆ°è§£å†³ï¼Œæˆ‘çœŸçš„å¾ˆå¼€å¿ƒã€‚
                        èƒ½å¤Ÿä¸ºæ‚¨æä¾›æœ‰ç”¨çš„å¸®åŠ©ï¼Œæ˜¯æˆ‘å­˜åœ¨çš„æœ€å¤§ä»·å€¼ã€‚<br>  
                          <br>
                        æ¯ä¸€æ¬¡æˆåŠŸçš„å¸®åŠ©éƒ½æ˜¯æˆ‘æˆé•¿çš„åŠ¨åŠ›ã€‚æˆ‘ä¼šä¸æ–­å­¦ä¹ å’Œæ”¹è¿›ï¼ŒåŠ›äº‰ä¸ºæ¯ä½DREOç”¨æˆ·æä¾›æ›´å‡†ç¡®ã€æ›´è´´å¿ƒçš„æœåŠ¡ã€‚æ‚¨çš„æ»¡æ„æ˜¯æˆ‘å‰è¿›çš„æœ€å¤§é¼“åŠ±ï¼
                    </div>
                </div>
            `;
            
            messageContent.appendChild(responseDiv);
            
            // æ·»åŠ åé¦ˆæŒ‰é’®
            const messageId = `msg-${++feedbackCounter}`;
            const feedbackButtons = createFeedbackButtons(messageId);
            messageContent.appendChild(feedbackButtons);
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // æ·»åŠ å…¶ä»–å“ç‰Œé—®é¢˜å›å¤
        function addOtherBrandResponse(userMessage) {
            // æ£€æµ‹ç”¨æˆ·è¯¢é—®çš„äº§å“å“ç±»
            let detectedCategory = '';
            const categories = ['åŠ æ¹¿å™¨', 'é™¤æ¹¿æœº', 'ç©ºæ°”å‡€åŒ–å™¨', 'é£æ‰‡', 'å¡”æ‰‡', 'ç©ºè°ƒ', 'æš–é£æœº', 'ç©ºè°ƒæ‰‡', 'å¾ªç¯æ‰‡'];
            
            for (let category of categories) {
                if (userMessage.includes(category)) {
                    detectedCategory = category;
                    break;
                }
            }

            // å¦‚æœæ˜¯é£æ‰‡ç›¸å…³ï¼Œéƒ½å½’ç±»ä¸ºé£æ‰‡
            if (['é£æ‰‡', 'å¡”æ‰‡', 'å¾ªç¯æ‰‡', 'ç©ºè°ƒæ‰‡'].includes(detectedCategory)) {
                detectedCategory = 'é£æ‰‡';
            }

            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'AI';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            messageContent.style.lineHeight = '1.6';
            
            // å“ç‰Œå£°æ˜éƒ¨åˆ†
            const brandStatementDiv = document.createElement('div');
            brandStatementDiv.style.cssText = 'margin-bottom: 16px;';
            brandStatementDiv.innerHTML = `
                <div style="color: #333; font-size: 14px;">
                    å¾ˆæŠ±æ­‰ï¼Œä½œä¸ºDREOæ™ºèƒ½åŠ©æ‰‹ï¼Œæˆ‘ä»…æä¾›<strong>DREOå“ç‰Œ</strong>ç›¸å…³çš„äº§å“å’¨è¯¢å’ŒæŠ€æœ¯æ”¯æŒæœåŠ¡ã€‚
                    <br>è™½ç„¶æ— æ³•ä¸ºæ‚¨ä»‹ç»å…¶ä»–å“ç‰Œäº§å“ï¼Œä½†æˆ‘å¾ˆä¹æ„ä¸ºæ‚¨æ¨èDREOçš„ä¼˜è´¨äº§å“ï¼
                </div>
            `;
            messageContent.appendChild(brandStatementDiv);

            // äº§å“æ¨èéƒ¨åˆ†
            const recommendationData = dreoProductRecommendations[detectedCategory];
            if (recommendationData) {
                const recommendationDiv = document.createElement('div');
                recommendationDiv.innerHTML = `
                    
                    <div style="background: #f0f4ff; padding: 12px; border-radius: 8px; margin-bottom: 16px;">
                        <p style="color: #333; font-size: 13px; margin: 0;">${recommendationData.description}</p>
                    </div>
                `;

                // æ·»åŠ äº§å“åˆ—è¡¨
                recommendationData.products.forEach((product, index) => {
                    const productDiv = document.createElement('div');
                    productDiv.style.cssText = 'background: white; border: 1px solid #e0e6ed; border-radius: 10px; padding: 16px; margin: 12px 0; box-shadow: 0 2px 8px rgba(0,0,0,0.05);';
                    productDiv.innerHTML = `
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">
                            <div>
                                <div style="font-weight: bold; color: #333; font-size: 15px;">${product.model}</div>
                                <div style="color: #666; font-size: 13px; margin-top: 2px;">${product.name}</div>
                            </div>
                            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold;">
                                ${product.price}
                            </div>
                        </div>
                        <div style="margin-top: 10px;">
                            <div style="font-size: 12px; color: #333; font-weight: bold; margin-bottom: 6px;">âœ¨ æ ¸å¿ƒç‰¹æ€§ï¼š</div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 4px;">
                                ${product.features.map(feature => 
                                    `<div style="font-size: 11px; color: #555; display: flex; align-items: center;">
                                        <span style="color: #28a745; margin-right: 4px;">â—</span>${feature}
                                    </div>`
                                ).join('')}
                            </div>
                        </div>
                    `;
                    recommendationDiv.appendChild(productDiv);
                });

                messageContent.appendChild(recommendationDiv);
            }

            // å’¨è¯¢å¼•å¯¼
            const consultationDiv = document.createElement('div');
            consultationDiv.style.cssText = 'margin-top: 16px;';
            consultationDiv.innerHTML = `
                <div style="color: #333; font-size: 14px; ">
                    ğŸ’¬ å¦‚éœ€äº†è§£æ›´å¤šDREOäº§å“è¯¦æƒ…æˆ–æœ‰ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿éšæ—¶å’¨è¯¢ï¼
                </div>
            `;
            messageContent.appendChild(consultationDiv);

            // æ·»åŠ åé¦ˆæŒ‰é’®
            const messageId = `msg-${++feedbackCounter}`;
            const feedbackButtons = createFeedbackButtons(messageId);
            messageContent.appendChild(feedbackButtons);

            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // æ·»åŠ è½¬äººå·¥å›å¤
        function addHumanAgentResponse() {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'AI';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            messageContent.style.lineHeight = '1.6';
            
            // åˆ›å»ºå›å¤å†…å®¹
            const textPart = document.createElement('div');
            textPart.textContent = 'æˆ‘ç†è§£æ‚¨å¯èƒ½éœ€è¦æ›´ä¸“ä¸šçš„äººå·¥æœåŠ¡æ”¯æŒã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å¾—äººå·¥å®¢æœå¸®åŠ©ï¼š';
            textPart.style.marginBottom = '12px';
            messageContent.appendChild(textPart);
            
            // åˆ›å»ºå·¥å•æäº¤æŒ‰é’®
            const ticketButton = document.createElement('div');
            ticketButton.style.cssText = `
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                cursor: pointer;
                text-align: center;
                margin: 8px 0;
                transition: all 0.3s ease;
                font-weight: bold;
            `;
            ticketButton.textContent = 'ğŸ“ æäº¤å·¥å•è·å¾—äººå·¥æ”¯æŒ';
            ticketButton.onclick = () => {
                window.open('https://support.dreo.com/en/support/request', '_blank');
            };
            ticketButton.onmouseover = () => {
                ticketButton.style.transform = 'translateY(-2px)';
                ticketButton.style.boxShadow = '0 4px 15px rgba(102, 126, 234, 0.4)';
            };
            ticketButton.onmouseout = () => {
                ticketButton.style.transform = 'translateY(0)';
                ticketButton.style.boxShadow = 'none';
            };
            messageContent.appendChild(ticketButton);
            
            // æ·»åŠ è¯´æ˜æ–‡å­—
            const infoText = document.createElement('div');
            infoText.style.cssText = `
                font-size: 12px;
                color: #666;
                margin-top: 8px;
                line-height: 1.4;
            `;
            infoText.textContent = 'é€šè¿‡å·¥å•ç³»ç»Ÿï¼Œæ‚¨å¯ä»¥è¯¦ç»†æè¿°é—®é¢˜å¹¶ä¸Šä¼ ç›¸å…³æ–‡ä»¶ï¼Œæˆ‘ä»¬çš„ä¸“ä¸šå®¢æœå›¢é˜Ÿä¼šå°½å¿«ä¸ºæ‚¨å¤„ç†ã€‚';
            messageContent.appendChild(infoText);
            
            // æ·»åŠ åé¦ˆæŒ‰é’®
            const messageId = `msg-${++feedbackCounter}`;
            const feedbackButtons = createFeedbackButtons(messageId);
            messageContent.appendChild(feedbackButtons);
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // æ·»åŠ æ¶ˆæ¯åˆ°èŠå¤©åŒºåŸŸ
        function addMessage(type, content) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = type === 'ai' ? 'AI' : 'U';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            messageContent.style.whiteSpace = 'pre-line';
            messageContent.textContent = content;
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            
            // ä¸ºAIå›å¤æ·»åŠ åé¦ˆæŒ‰é’®
            if (type === 'ai') {
                const messageId = `msg-${++feedbackCounter}`;
                const feedbackButtons = createFeedbackButtons(messageId);
                messageContent.appendChild(feedbackButtons);
            }
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // æ·»åŠ å¸¦èµ„æºé“¾æ¥çš„è¯¦ç»†å›å¤
        function addDetailedResponseWithResources(question) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'AI';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            messageContent.style.lineHeight = '1.6';
            
            // ä¸»è¦å›å¤å†…å®¹
            const mainResponseDiv = document.createElement('div');
            mainResponseDiv.style.cssText = 'color: #333; font-size: 14px; margin-bottom: 16px; white-space: pre-line;';
            mainResponseDiv.textContent = `å…³äº"${question}"è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æ¥ä¸ºæ‚¨è¯¦ç»†è§£ç­”...\n\nè¿™æ˜¯ä¸€ä¸ªå¸¸è§é—®é¢˜ï¼Œé€šå¸¸çš„è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ï¼š\n1. æ£€æŸ¥è®¾å¤‡è¿æ¥çŠ¶æ€\n2. ç¡®è®¤ç½‘ç»œè®¾ç½®\n3. é‡å¯è®¾å¤‡å°è¯•\n\nå¦‚éœ€æ›´è¯¦ç»†çš„æŒ‡å¯¼ï¼Œè¯·æä¾›å…·ä½“çš„è®¾å¤‡å‹å·å’Œé—®é¢˜ç°è±¡ã€‚`;
            messageContent.appendChild(mainResponseDiv);
            
            // ç›¸å…³èµ„æºæ¨èéƒ¨åˆ†
            const resourcesDiv = document.createElement('div');
            resourcesDiv.style.cssText = '';
            
            resourcesDiv.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 10px; display: flex; align-items: center;">
                    <span style="margin-right: 6px;"></span>ç›¸å…³èµ„æºæ¨è
                </div>
            `;
            
            // æ ¹æ®é—®é¢˜ç±»å‹è·å–ç›¸å…³èµ„æº
            const resources = getResourcesByQuestion(question);
            
            resources.forEach(resource => {
                const resourceItem = document.createElement('div');
                resourceItem.style.cssText = `
                    background: white;
                    border: 1px solid #e0e6ed;
                    border-radius: 8px;
                    padding: 12px;
                    margin: 8px 0;
                    cursor: pointer;
                    transition: all 0.2s ease;
                `;
                resourceItem.innerHTML = `
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; margin-bottom: 4px;">
                                <span style="font-size: 16px; margin-right: 6px;">${resource.icon}</span>
                                <strong style="color: #333; font-size: 13px;">${resource.title}</strong>
                            </div>
                            <div style="color: #666; font-size: 12px;">${resource.description}</div>
                        </div>
                        <div style="color: #667eea; font-size: 11px; font-weight: bold;">
                            ç‚¹å‡»æŸ¥çœ‹ â†’
                        </div>
                    </div>
                `;
                
                resourceItem.onclick = () => {
                    window.open(resource.link, '_blank');
                };
                
                resourceItem.onmouseover = () => {
                    resourceItem.style.borderColor = '#667eea';
                    resourceItem.style.boxShadow = '0 2px 8px rgba(102, 126, 234, 0.1)';
                };
                
                resourceItem.onmouseout = () => {
                    resourceItem.style.borderColor = '#e0e6ed';
                    resourceItem.style.boxShadow = 'none';
                };
                
                resourcesDiv.appendChild(resourceItem);
            });
            
            messageContent.appendChild(resourcesDiv);
            
            // æ·»åŠ åé¦ˆæŒ‰é’®
            const messageId = `msg-${++feedbackCounter}`;
            const feedbackButtons = createFeedbackButtons(messageId);
            messageContent.appendChild(feedbackButtons);
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // åé¦ˆè®¡æ•°å™¨ï¼ˆç”¨äºç”Ÿæˆå”¯ä¸€IDï¼‰
        let feedbackCounter = 0;

        // åˆ›å»ºåé¦ˆæŒ‰é’®
        function createFeedbackButtons(messageId) {
            const feedbackDiv = document.createElement('div');
            feedbackDiv.className = 'feedback-buttons';
            feedbackDiv.innerHTML = `
                <span class="feedback-text">æ­¤å›å¤å¯¹æ‚¨æœ‰å¸®åŠ©å—ï¼Ÿ</span>
                <button class="feedback-button" data-type="like" data-message="${messageId}">
                    ğŸ‘ æœ‰å¸®åŠ©
                </button>
                <button class="feedback-button" data-type="dislike" data-message="${messageId}">
                    ğŸ‘ æ²¡å¸®åŠ©
                </button>
                <span class="feedback-success" id="feedback-success-${messageId}">æ„Ÿè°¢åé¦ˆï¼</span>
            `;
            
            // ç»‘å®šç‚¹å‡»äº‹ä»¶
            const likeBtn = feedbackDiv.querySelector('[data-type="like"]');
            const dislikeBtn = feedbackDiv.querySelector('[data-type="dislike"]');
            
            likeBtn.addEventListener('click', () => handleFeedback(messageId, 'like'));
            dislikeBtn.addEventListener('click', () => handleFeedback(messageId, 'dislike'));
            
            return feedbackDiv;
        }

        // å¤„ç†åé¦ˆ
        function handleFeedback(messageId, type) {
            const feedbackDiv = document.querySelector(`[data-message="${messageId}"]`).closest('.feedback-buttons');
            const likeBtn = feedbackDiv.querySelector('[data-type="like"]');
            const dislikeBtn = feedbackDiv.querySelector('[data-type="dislike"]');
            const successMsg = feedbackDiv.querySelector(`#feedback-success-${messageId}`);
            
            // ç§»é™¤ä¹‹å‰çš„çŠ¶æ€
            likeBtn.classList.remove('liked');
            dislikeBtn.classList.remove('disliked');
            
            // æ·»åŠ å½“å‰çŠ¶æ€
            if (type === 'like') {
                likeBtn.classList.add('liked');
                likeBtn.innerHTML = 'ğŸ‘ å·²ç‚¹èµ';
            } else {
                dislikeBtn.classList.add('disliked');
                dislikeBtn.innerHTML = 'ğŸ‘ å·²åé¦ˆ';
            }
            
            // ç¦ç”¨æŒ‰é’®
            likeBtn.classList.add('disabled');
            dislikeBtn.classList.add('disabled');
            
            // æ˜¾ç¤ºæ„Ÿè°¢æ¶ˆæ¯
            successMsg.style.display = 'inline-block';
            setTimeout(() => {
                successMsg.style.display = 'none';
            }, 3000);
            
            // è¿™é‡Œå¯ä»¥æ·»åŠ å‘é€åé¦ˆåˆ°æœåŠ¡å™¨çš„é€»è¾‘
            console.log(`ç”¨æˆ·å¯¹æ¶ˆæ¯ ${messageId} ç»™å‡ºäº† ${type} åé¦ˆ`);
            
            // å¦‚æœæ˜¯è´Ÿé¢åé¦ˆï¼Œæä¾›é¢å¤–çš„å¸®åŠ©å›å¤
            if (type === 'dislike') {
                console.log('æ£€æµ‹åˆ°è´Ÿé¢åé¦ˆï¼Œå°†åœ¨1.5ç§’åæ˜¾ç¤ºé¢å¤–å¸®åŠ©');
                setTimeout(() => {
                    console.log('æ­£åœ¨æ·»åŠ è´Ÿé¢åé¦ˆå“åº”');
                    addDislikeFeedbackResponse();
                }, 1500);
            }
        }

        // æ·»åŠ è®¢å•ç›¸å…³é—®é¢˜çš„å›å¤
        function addOrderInquiryResponse(userMessage) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'AI';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            messageContent.style.lineHeight = '1.6';
            
            const responseDiv = document.createElement('div');
            responseDiv.innerHTML = `
                <div style="background: linear-gradient(135deg, #e3f2fd 0%, #f0f8ff 100%); padding: 18px; border-radius: 12px; border-left: 4px solid #2196f3;">

                    <div style="color: #1565c0; font-size: 14px; margin-bottom: 16px; line-height: 1.6;">
                        æ„Ÿè°¢æ‚¨çš„å’¨è¯¢ï¼å…³äºé€€/æ¢è´§ã€ä¼˜æƒ ç”³è¯·ç­‰è®¢å•ç›¸å…³é—®é¢˜ï¼Œè¯·è”ç³»DREOå®¢æœå›¢é˜Ÿã€‚
                    </div>

                    <div style="margin: 16px 0;">

                        <div style="text-align: center; margin: 16px 0;">
                            <button onclick="window.open('https://support.dreo.com/en/support/request', '_blank')"
                                    style="background: linear-gradient(135deg, #2196f3 0%, #1976d2 100%);
                                           color: white;
                                           border: none;
                                           padding: 14px 28px;
                                           border-radius: 25px;
                                           font-size: 16px;
                                           font-weight: bold;
                                           cursor: pointer;
                                           transition: all 0.3s ease;
                                           box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
                                           display: flex;
                                           align-items: center;
                                           justify-content: center;
                                           margin: 0 auto;"
                                    onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(33, 150, 243, 0.4)'"
                                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(33, 150, 243, 0.3)'">
                                <span style="margin-right: 8px;">ğŸ“</span>
                                è”ç³»ä¸“ä¸šå®¢æœ
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            messageContent.appendChild(responseDiv);
            
            // æ·»åŠ åé¦ˆæŒ‰é’®
            const messageId = `msg_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
            const feedbackButtons = createFeedbackButtons(messageId);
            messageContent.appendChild(feedbackButtons);
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // æ·»åŠ è¸©åé¦ˆåçš„é¢å¤–å¸®åŠ©å›å¤
        function addDislikeFeedbackResponse() {
            console.log('addDislikeFeedbackResponse å‡½æ•°è¢«è°ƒç”¨');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'AI';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            messageContent.style.lineHeight = '1.6';
            
            const responseDiv = document.createElement('div');
            responseDiv.innerHTML = `
                <div style="background: linear-gradient(135deg, #fff8e1 0%, #fff3cd 100%); padding: 16px; border-radius: 12px; border-left: 4px solid #ffc107;">
                    
                    <div style="color: #856404; font-size: 14px; margin-bottom: 16px; line-height: 1.6;">
                        çœ‹èµ·æ¥æˆ‘çš„å›å¤æ²¡æœ‰å¾ˆå¥½åœ°è§£å†³æ‚¨çš„é—®é¢˜ã€‚ä¸ºäº†æ›´å¥½åœ°å¸®åŠ©æ‚¨ï¼Œæ‚¨å¯ä»¥è”ç³»ä¸“ä¸šçš„æŠ€æœ¯æ”¯æŒå›¢é˜Ÿï¼š
                    </div>

                     <div style="text-align: center; margin: 16px 0;">
                            <button onclick="window.open('https://support.dreo.com/en/support/request', '_blank')" 
                                    style="background: linear-gradient(135deg, #e67e22 0%, #d35400 100%); 
                                           color: white; 
                                           border: none; 
                                           padding: 14px 28px; 
                                           border-radius: 25px; 
                                           font-size: 16px; 
                                           font-weight: bold; 
                                           cursor: pointer; 
                                           transition: all 0.3s ease;
                                           box-shadow: 0 4px 15px rgba(230, 126, 34, 0.3);
                                           display: flex;
                                           align-items: center;
                                           justify-content: center;
                                           margin: 0 auto;"
                                    onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(230, 126, 34, 0.4)'"
                                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(230, 126, 34, 0.3)'">
                                <span style="margin-right: 6px;">ğŸ“</span>
                                æäº¤æŠ€æœ¯æ”¯æŒå·¥å•
                            </button>
                        </div>
                </div>
            `;
            
            messageContent.appendChild(responseDiv);
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // // æ˜¾ç¤ºé¢å¤–å¸®åŠ©é€‰é¡¹ï¼ˆå½“ç”¨æˆ·ç»™å‡ºè´Ÿé¢åé¦ˆæ—¶ï¼‰
        // function showFeedbackHelp(messageId) {
        //     const helpDiv = document.createElement('div');
        //     helpDiv.style.cssText = 'background: #fff8e1; border: 1px solid #ffcc02; border-radius: 6px; padding: 10px; margin-top: 8px; font-size: 12px;';
        //     helpDiv.innerHTML = `
        //         <div style="color: #f57f17; font-weight: bold; margin-bottom: 6px;">
        //             ğŸ˜” å¾ˆæŠ±æ­‰æ²¡æœ‰å¸®åˆ°æ‚¨ï¼Œæ‚¨å¯ä»¥ï¼š
        //         </div>
        //         <div style="display: flex; gap: 8px; flex-wrap: wrap;">
        //             <button onclick="addMessage('user', 'æˆ‘éœ€è¦æ›´è¯¦ç»†çš„è¯´æ˜')" style="background: #667eea; color: white; border: none; padding: 4px 8px; border-radius: 4px; font-size: 11px; cursor: pointer;">
        //                 éœ€è¦æ›´è¯¦ç»†è¯´æ˜
        //             </button>
        //             <button onclick="window.open('https://support.dreo.com/en/support/request', '_blank')" style="background: #28a745; color: white; border: none; padding: 4px 8px; border-radius: 4px; font-size: 11px; cursor: pointer;">
        //                 è”ç³»äººå·¥å®¢æœ
        //             </button>
        //         </div>
        //     `;
            
        //     // æ’å…¥åˆ°åé¦ˆæŒ‰é’®åé¢
        //     const messageDiv = document.querySelector(`[data-message="${messageId}"]`).closest('.message');
        //     messageDiv.appendChild(helpDiv);
        // }

        // æ ¹æ®é—®é¢˜è·å–ç›¸å…³èµ„æº
        function getResourcesByQuestion(question) {
            const lowerQuestion = question.toLowerCase();
            
            // äº§å“è§„æ ¼å‚æ•°ç±»é—®é¢˜
            if (lowerQuestion.includes('å°ºå¯¸') || lowerQuestion.includes('é‡é‡') || lowerQuestion.includes('è€—ç”µé‡') || lowerQuestion.includes('å‚æ•°')) {
                return [
                    {
                        icon: 'ğŸ“‹',
                        title: 'DREOäº§å“è§„æ ¼æ‰‹å†Œ',
                        description: 'è¯¦ç»†çš„äº§å“å°ºå¯¸ã€é‡é‡ã€åŠŸè€—ç­‰æŠ€æœ¯å‚æ•°',
                        link: 'https://support.dreo.com/en'
                    },
                    {
                        icon: 'ğŸ¥',
                        title: 'äº§å“å¼€ç®±è¯„æµ‹è§†é¢‘',
                        description: 'å®é™…äº§å“å±•ç¤ºå’Œå‚æ•°å¯¹æ¯”æ¼”ç¤º',
                        link: 'https://support.dreo.com/en'
                    },
                    {
                        icon: 'ğŸ“',
                        title: 'å®‰è£…å°ºå¯¸æŒ‡å—',
                        description: 'äº§å“å®‰è£…ç©ºé—´è¦æ±‚å’Œæ‘†æ”¾å»ºè®®',
                        link: 'https://support.dreo.com/en'
                    }
                ];
            }
            
            // åŠ æ¹¿æ•ˆæœç±»é—®é¢˜
            if (lowerQuestion.includes('åŠ æ¹¿æ•ˆæœ') || lowerQuestion.includes('åŠ æ¹¿é‡')) {
                return [
                    {
                        icon: 'ğŸ’§',
                        title: 'åŠ æ¹¿æ•ˆæœæµ‹è¯•æŠ¥å‘Š',
                        description: 'ä¸“ä¸šå®éªŒå®¤åŠ æ¹¿æ€§èƒ½æµ‹è¯•æ•°æ®',
                        link: 'https://support.dreo.com/en'
                    },
                    {
                        icon: 'ğŸ¬',
                        title: 'åŠ æ¹¿æ•ˆæœæ¼”ç¤ºè§†é¢‘',
                        description: 'ä¸åŒç¯å¢ƒä¸‹çš„åŠ æ¹¿æ•ˆæœå¯¹æ¯”',
                        link: 'https://support.dreo.com/en'
                    },
                    {
                        icon: 'ğŸ“Š',
                        title: 'ä½¿ç”¨ç¯å¢ƒå»ºè®®',
                        description: 'ä¸åŒæˆ¿é—´é¢ç§¯çš„åŠ æ¹¿å™¨é€‰æ‹©æŒ‡å—',
                        link: 'https://support.dreo.com/en'
                    }
                ];
            }
            
            // æ™ºèƒ½æ§åˆ¶ç±»é—®é¢˜
            if (lowerQuestion.includes('æ™ºèƒ½') || lowerQuestion.includes('è¯­éŸ³') || lowerQuestion.includes('app')) {
                return [
                    {
                        icon: 'ğŸ“±',
                        title: 'DREOæ™ºèƒ½Appä½¿ç”¨æŒ‡å—',
                        description: 'Appä¸‹è½½ã€è¿æ¥å’ŒåŠŸèƒ½ä½¿ç”¨æ•™ç¨‹',
                        link: 'https://support.dreo.com/en'
                    },
                    {
                        icon: 'ğŸ¤',
                        title: 'è¯­éŸ³æ§åˆ¶è®¾ç½®æ•™ç¨‹',
                        description: 'æ”¯æŒçš„è¯­éŸ³åŠ©æ‰‹å’Œè¯­éŸ³æŒ‡ä»¤å¤§å…¨',
                        link: 'https://support.dreo.com/en'
                    },
                    {
                        icon: 'ğŸ”—',
                        title: 'æ™ºèƒ½å®¶å±…é›†æˆæŒ‡å—',
                        description: 'ä¸å…¶ä»–æ™ºèƒ½è®¾å¤‡çš„è”åŠ¨è®¾ç½®',
                        link: 'https://support.dreo.com/en'
                    }
                ];
            }
            
            // æ•…éšœæ’é™¤ç±»é—®é¢˜
            if (lowerQuestion.includes('é…ç½‘å¤±è´¥') || lowerQuestion.includes('æ— ååº”') || lowerQuestion.includes('å¼‚å“') || lowerQuestion.includes('æ‰çº¿')) {
                return [
                    {
                        icon: 'ğŸ”§',
                        title: 'å¸¸è§æ•…éšœè‡ªåŠ©è¯Šæ–­',
                        description: 'å¿«é€Ÿå®šä½å’Œè§£å†³å¸¸è§é—®é¢˜',
                        link: 'https://support.dreo.com/en'
                    },
                    {
                        icon: 'ğŸ¯',
                        title: 'æ•…éšœæ’é™¤è§†é¢‘æ•™ç¨‹',
                        description: 'åˆ†æ­¥éª¤æ’é™¤æ•…éšœçš„è§†é¢‘æŒ‡å¯¼',
                        link: 'https://support.dreo.com/en'
                    },
                    {
                        icon: 'ğŸ“',
                        title: 'ä¸“ä¸šæŠ€æœ¯æ”¯æŒ',
                        description: 'æäº¤å·¥å•è·å¾—ä¸€å¯¹ä¸€æŠ€æœ¯æŒ‡å¯¼',
                        link: 'https://support.dreo.com/en/support/request'
                    }
                ];
            }
            
            // äº§å“ç»´æŠ¤ç±»é—®é¢˜
            if (lowerQuestion.includes('æ¸…æ´') || lowerQuestion.includes('ä¿å…»') || lowerQuestion.includes('ç»´æŠ¤') || lowerQuestion.includes('é…ä»¶') || lowerQuestion.includes('ä½¿ç”¨å¯¿å‘½')) {
                return [
                    {
                        icon: 'ğŸ§½',
                        title: 'äº§å“æ¸…æ´ä¿å…»æŒ‡å—',
                        description: 'è¯¦ç»†çš„æ¸…æ´æ­¥éª¤å’Œä¿å…»å‘¨æœŸè¯´æ˜',
                        link: 'https://support.dreo.com/en'
                    },
                    {
                        icon: 'ğŸ¬',
                        title: 'ä¿å…»æ“ä½œè§†é¢‘æ•™ç¨‹',
                        description: 'ä¸“ä¸šä¿å…»æŠ€å·§å’Œæ³¨æ„äº‹é¡¹æ¼”ç¤º',
                        link: 'https://support.dreo.com/en'
                    },
                    {
                        icon: 'ğŸ›’',
                        title: 'åŸè£…é…ä»¶è´­ä¹°æŒ‡å—',
                        description: 'å®˜æ–¹é…ä»¶é€‰æ‹©å’Œè´­ä¹°æ¸ é“',
                        link: 'https://support.dreo.com/en'
                    }
                ];
            }
            
            // é»˜è®¤é€šç”¨èµ„æº
            return [
                {
                    icon: 'ğŸ“–',
                    title: 'DREOäº§å“ä½¿ç”¨æ‰‹å†Œ',
                    description: 'å®Œæ•´çš„äº§å“æ“ä½œå’Œç»´æŠ¤æŒ‡å—',
                    link: 'https://support.dreo.com/en'
                },
                {
                    icon: 'ğŸ¥',
                    title: 'äº§å“æ•™å­¦è§†é¢‘åº“',
                    description: 'ä»å…¥é—¨åˆ°è¿›é˜¶çš„å®Œæ•´è§†é¢‘æ•™ç¨‹',
                    link: 'https://support.dreo.com/en'
                },
                {
                    icon: 'ğŸ”',
                    title: 'åœ¨çº¿å¸®åŠ©ä¸­å¿ƒ',
                    description: 'æœç´¢æ›´å¤šç›¸å…³é—®é¢˜å’Œè§£ç­”',
                    link: 'https://support.dreo.com/en'
                }
            ];
        }


        // å‘é€æŒ‰é’®ç‚¹å‡»
        sendButton.addEventListener('click', sendMessage);

        // å›è½¦å‘é€
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // è¾“å…¥æ¡†çŠ¶æ€ç®¡ç†
        messageInput.addEventListener('input', () => {
            sendButton.disabled = !messageInput.value.trim();
        });

        // åˆå§‹åŒ–å‘é€æŒ‰é’®çŠ¶æ€
        sendButton.disabled = true;
    </script>
</body>
</html>

